"use strict";

;

(function () {
  cropText();
  var readMore = document.querySelectorAll('.js-read-more');
  readMore.forEach(function (el) {
    el.addEventListener('click', function () {
      var elText = el.innerText;
      var hiddenText = el.previousElementSibling;
      el.innerText = elText == 'read more >' ? 'hide' : 'read more >';
      hiddenText.classList.toggle('show');
    });
  });

  function cropText() {
    var max = 200;
    var text = document.querySelectorAll('.js-read-more-text');
    text.forEach(function (el) {
      var str = el.innerText.trim();

      if (str.length > max) {
        var subStr = str.substring(0, max);
        var hiddenStr = str.substring(max, str.length);
        el.innerText = subStr;
        el.innerHTML += "<span class=\"hidden-text js-hidden-text\">".concat(hiddenStr, "</span>");
        el.innerHTML += '<span class="read-more js-read-more">read more ></span>';
      }
    });
  }

  var accordions = document.querySelectorAll(".accordion__item");

  var openAccordion = function openAccordion(accordion) {
    var content = accordion.querySelector(".accordion__body");
    accordion.classList.add("active");
    content.style.maxHeight = content.scrollHeight + "px";
  };

  var closeAccordion = function closeAccordion(accordion) {
    var content = accordion.querySelector(".accordion__body");
    accordion.classList.remove("active");
    content.style.maxHeight = null;
  };

  accordions.forEach(function (accordion) {
    var intro = accordion.querySelector(".accordion__header");
    var content = accordion.querySelector(".accordion__body");

    intro.onclick = function () {
      if (content.style.maxHeight) {
        closeAccordion(accordion);
      } else {
        // accordions.forEach((accordion) => closeAccordion(accordion));
        openAccordion(accordion);
      }
    };
  });
  var sidebarLinks = document.querySelectorAll(".sidebar-menu__link");
  sidebarLinks.forEach(function (elem) {
    return elem.addEventListener("click", navbarLinkClick);
  });

  function navbarLinkClick(event) {
    smoothScroll(event);
  }

  function smoothScroll(event) {
    event.preventDefault();
    var targetId = event.currentTarget.getAttribute("href");

    if (window.screen.width > 1024) {
      window.scrollTo({
        top: targetId === "#" ? 0 : document.querySelector(targetId).offsetTop - 100,
        behavior: "smooth"
      });
    } else {
      window.scrollTo({
        top: targetId === "#" ? 0 : document.querySelector(targetId).offsetTop - 200,
        behavior: "smooth"
      });
    }
  }

  if (document.querySelector('.products-sticky') !== null) {
    var trackScroll = function trackScroll(elements) {
      var stickyBlocks = document.querySelectorAll(elements);
      stickyBlocks.forEach(function (el) {
        if (el.classList.contains('show') && window.pageYOffset < stickyBlockCoords) {
          el.classList.remove('show');
        } else if (window.pageYOffset > stickyBlockCoords) {
          el.classList.add('show');
        }
      });
    };

    var throttle = function throttle(type, name, obj) {
      obj = obj || window;
      var running = false;

      var func = function func() {
        if (running) {
          return;
        }

        running = true;
        requestAnimationFrame(function () {
          obj.dispatchEvent(new CustomEvent(name));
          running = false;
        });
      };

      obj.addEventListener(type, func);
    };

    var stickyBlockCoords = document.querySelector('.sticky-block').getBoundingClientRect().bottom + window.pageYOffset;
    window.addEventListener("scroll", function () {
      trackScroll('.sticky-block');
    });
    window.addEventListener('optimizedResize', function () {
      toggleFixed('.products-sticky');
    });
    ;
    toggleFixed('.products-sticky');
    throttle("resize", "optimizedResize");
  }

  function toggleFixed(el) {
    var element = document.querySelector(el);
    var fixedWidth = window.screen.width > 1024 ? element.parentElement.clientWidth - 285 : element.parentElement.clientWidth;
    element.style.width = fixedWidth + 'px'; // var parentwidth = $(".parent").width();
    // $(".child").toggleClass("fixed").width(parentwidth);
  } // hamburger open/close animation


  var trigger = document.querySelector("#hamburger");
  var mobileNav = document.querySelector("#mobile-nav");
  var isClosed = true;
  trigger.addEventListener("click", burgerTime);

  function burgerTime() {
    if (isClosed == true) {
      trigger.classList.remove("is-open");
      trigger.classList.add("is-closed");
      mobileNav.classList.add('is-open');
      isClosed = false;
    } else {
      trigger.classList.remove("is-closed");
      trigger.classList.add("is-open");
      mobileNav.classList.remove('is-open');
      isClosed = true;
    }
  } // search form open/close animation


  var searchBtn = document.querySelector(".search-form__btn");
  searchBtn.addEventListener("click", function () {
    this.classList.toggle("close");
    this.previousElementSibling.classList.toggle("inclicked");
    this.previousElementSibling.value = "";
  });
  $(".js-product-slider-preview").slick({
    slidesToShow: 4,
    vertical: true,
    verticalSwiping: true,
    slidesToScroll: 1,
    focusOnSelect: true,
    prevArrow: ".product-slider-preview__btn--prev",
    nextArrow: ".product-slider-preview__btn--next",
    variableWidth: true,
    asNavFor: ".product-slider-main"
  });
  $(".product-slider-main").slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    arrows: false,
    fade: true,
    asNavFor: ".js-product-slider-preview"
  });
  $(".product-table__row").eq(2).addClass("current");
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY3JvcFRleHQiLCJyZWFkTW9yZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbFRleHQiLCJpbm5lclRleHQiLCJoaWRkZW5UZXh0IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm1heCIsInRleHQiLCJzdHIiLCJ0cmltIiwibGVuZ3RoIiwic3ViU3RyIiwic3Vic3RyaW5nIiwiaGlkZGVuU3RyIiwiaW5uZXJIVE1MIiwiYWNjb3JkaW9ucyIsIm9wZW5BY2NvcmRpb24iLCJhY2NvcmRpb24iLCJjb250ZW50IiwicXVlcnlTZWxlY3RvciIsImFkZCIsInN0eWxlIiwibWF4SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiY2xvc2VBY2NvcmRpb24iLCJyZW1vdmUiLCJpbnRybyIsIm9uY2xpY2siLCJzaWRlYmFyTGlua3MiLCJlbGVtIiwibmF2YmFyTGlua0NsaWNrIiwiZXZlbnQiLCJzbW9vdGhTY3JvbGwiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldElkIiwiY3VycmVudFRhcmdldCIsImdldEF0dHJpYnV0ZSIsIndpbmRvdyIsInNjcmVlbiIsIndpZHRoIiwic2Nyb2xsVG8iLCJ0b3AiLCJvZmZzZXRUb3AiLCJiZWhhdmlvciIsInRyYWNrU2Nyb2xsIiwiZWxlbWVudHMiLCJzdGlja3lCbG9ja3MiLCJjb250YWlucyIsInBhZ2VZT2Zmc2V0Iiwic3RpY2t5QmxvY2tDb29yZHMiLCJ0aHJvdHRsZSIsInR5cGUiLCJuYW1lIiwib2JqIiwicnVubmluZyIsImZ1bmMiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJib3R0b20iLCJ0b2dnbGVGaXhlZCIsImVsZW1lbnQiLCJmaXhlZFdpZHRoIiwicGFyZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwidHJpZ2dlciIsIm1vYmlsZU5hdiIsImlzQ2xvc2VkIiwiYnVyZ2VyVGltZSIsInNlYXJjaEJ0biIsInZhbHVlIiwiJCIsInNsaWNrIiwic2xpZGVzVG9TaG93IiwidmVydGljYWwiLCJ2ZXJ0aWNhbFN3aXBpbmciLCJzbGlkZXNUb1Njcm9sbCIsImZvY3VzT25TZWxlY3QiLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJ2YXJpYWJsZVdpZHRoIiwiYXNOYXZGb3IiLCJhcnJvd3MiLCJmYWRlIiwiZXEiLCJhZGRDbGFzcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQSxDQUFDLFlBQVk7QUFDVEEsRUFBQUEsUUFBUTtBQUVSLE1BQUlDLFFBQVEsR0FBR0MsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixlQUExQixDQUFmO0FBRUFGLEVBQUFBLFFBQVEsQ0FBQ0csT0FBVCxDQUFpQixVQUFBQyxFQUFFLEVBQUk7QUFDbkJBLElBQUFBLEVBQUUsQ0FBQ0MsZ0JBQUgsQ0FBb0IsT0FBcEIsRUFBNkIsWUFBTTtBQUMvQixVQUFJQyxNQUFNLEdBQUdGLEVBQUUsQ0FBQ0csU0FBaEI7QUFDQSxVQUFJQyxVQUFVLEdBQUdKLEVBQUUsQ0FBQ0ssc0JBQXBCO0FBRUFMLE1BQUFBLEVBQUUsQ0FBQ0csU0FBSCxHQUFlRCxNQUFNLElBQUksYUFBVixHQUEwQixNQUExQixHQUFtQyxhQUFsRDtBQUNBRSxNQUFBQSxVQUFVLENBQUNFLFNBQVgsQ0FBcUJDLE1BQXJCLENBQTRCLE1BQTVCO0FBQ0gsS0FORDtBQU9ILEdBUkQ7O0FBVUEsV0FBU1osUUFBVCxHQUFvQjtBQUNoQixRQUFJYSxHQUFHLEdBQUcsR0FBVjtBQUNBLFFBQUlDLElBQUksR0FBR1osUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixvQkFBMUIsQ0FBWDtBQUNBVyxJQUFBQSxJQUFJLENBQUNWLE9BQUwsQ0FBYSxVQUFBQyxFQUFFLEVBQUk7QUFDZixVQUFJVSxHQUFHLEdBQUdWLEVBQUUsQ0FBQ0csU0FBSCxDQUFhUSxJQUFiLEVB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Y3JvcFRleHQoKTtcclxuXHJcbiAgICBsZXQgcmVhZE1vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtcmVhZC1tb3JlJyk7XHJcblxyXG4gICAgcmVhZE1vcmUuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBlbFRleHQgPSBlbC5pbm5lclRleHQ7XHJcbiAgICAgICAgICAgIGxldCBoaWRkZW5UZXh0ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcclxuXHJcbiAgICAgICAgICAgIGVsLmlubmVyVGV4dCA9IGVsVGV4dCA9PSAncmVhZCBtb3JlID4nID8gJ2hpZGUnIDogJ3JlYWQgbW9yZSA+JztcclxuICAgICAgICAgICAgaGlkZGVuVGV4dC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBjcm9wVGV4dCgpIHtcclxuICAgICAgICBsZXQgbWF4ID0gMjAwO1xyXG4gICAgICAgIGxldCB0ZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLXJlYWQtbW9yZS10ZXh0Jyk7XHJcbiAgICAgICAgdGV4dC5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgbGV0IHN0ciA9IGVsLmlubmVyVGV4dC50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChzdHIubGVuZ3RoID4gbWF4KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3ViU3RyID0gc3RyLnN1YnN0cmluZygwLCBtYXgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGhpZGRlblN0ciA9IHN0ci5zdWJzdHJpbmcobWF4LCBzdHIubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGVsLmlubmVyVGV4dCA9IHN1YlN0cjtcclxuICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCArPSBgPHNwYW4gY2xhc3M9XCJoaWRkZW4tdGV4dCBqcy1oaWRkZW4tdGV4dFwiPiR7aGlkZGVuU3RyfTwvc3Bhbj5gO1xyXG4gICAgICAgICAgICAgICAgZWwuaW5uZXJIVE1MICs9ICc8c3BhbiBjbGFzcz1cInJlYWQtbW9yZSBqcy1yZWFkLW1vcmVcIj5yZWFkIG1vcmUgPjwvc3Bhbj4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWNjb3JkaW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWNjb3JkaW9uX19pdGVtXCIpO1xyXG5cclxuICAgIGNvbnN0IG9wZW5BY2NvcmRpb24gPSBhY2NvcmRpb24gPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihcIi5hY2NvcmRpb25fX2JvZHlcIik7XHJcbiAgICAgICAgYWNjb3JkaW9uLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgY29udGVudC5zdHlsZS5tYXhIZWlnaHQgPSBjb250ZW50LnNjcm9sbEhlaWdodCArIFwicHhcIjtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgY2xvc2VBY2NvcmRpb24gPSBhY2NvcmRpb24gPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihcIi5hY2NvcmRpb25fX2JvZHlcIik7XHJcbiAgICAgICAgYWNjb3JkaW9uLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgY29udGVudC5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICBhY2NvcmRpb25zLmZvckVhY2goYWNjb3JkaW9uID0+IHtcclxuICAgICAgICBjb25zdCBpbnRybyA9IGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKFwiLmFjY29yZGlvbl9faGVhZGVyXCIpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihcIi5hY2NvcmRpb25fX2JvZHlcIik7XHJcblxyXG4gICAgICAgIGludHJvLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLm1heEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgY2xvc2VBY2NvcmRpb24oYWNjb3JkaW9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGFjY29yZGlvbnMuZm9yRWFjaCgoYWNjb3JkaW9uKSA9PiBjbG9zZUFjY29yZGlvbihhY2NvcmRpb24pKTtcclxuICAgICAgICAgICAgICAgIG9wZW5BY2NvcmRpb24oYWNjb3JkaW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBzaWRlYmFyTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNpZGViYXItbWVudV9fbGlua1wiKTtcclxuXHJcbiAgICBzaWRlYmFyTGlua3MuZm9yRWFjaChlbGVtID0+IGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG5hdmJhckxpbmtDbGljaykpO1xyXG5cclxuICAgIGZ1bmN0aW9uIG5hdmJhckxpbmtDbGljayhldmVudCkge1xyXG4gICAgICAgIHNtb290aFNjcm9sbChldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc21vb3RoU2Nyb2xsKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCB0YXJnZXRJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcclxuICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA+IDEwMjQpIHtcclxuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHtcclxuICAgICAgICAgICAgICAgIHRvcDogdGFyZ2V0SWQgPT09IFwiI1wiID8gMCA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0SWQpLm9mZnNldFRvcCAtIDEwMCxcclxuICAgICAgICAgICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XHJcbiAgICAgICAgICAgICAgICB0b3A6IHRhcmdldElkID09PSBcIiNcIiA/IDAgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldElkKS5vZmZzZXRUb3AgLSAyMDAsXHJcbiAgICAgICAgICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtc3RpY2t5JykgIT09IG51bGwpIHtcclxuICAgICAgICBsZXQgc3RpY2t5QmxvY2tDb29yZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RpY2t5LWJsb2NrJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRyYWNrU2Nyb2xsKCcuc3RpY2t5LWJsb2NrJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcHRpbWl6ZWRSZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZUZpeGVkKCcucHJvZHVjdHMtc3RpY2t5Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRyYWNrU2Nyb2xsKGVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIGxldCBzdGlja3lCbG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgc3RpY2t5QmxvY2tzLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpICYmIHdpbmRvdy5wYWdlWU9mZnNldCA8IHN0aWNreUJsb2NrQ29vcmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzdGlja3lCbG9ja0Nvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB0aHJvdHRsZSh0eXBlLCBuYW1lLCBvYmopIHtcclxuICAgICAgICAgICAgb2JqID0gb2JqIHx8IHdpbmRvdztcclxuICAgICAgICAgICAgdmFyIHJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGZ1bmMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocnVubmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQobmFtZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5jKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRvZ2dsZUZpeGVkKCcucHJvZHVjdHMtc3RpY2t5Jyk7XHJcblxyXG4gICAgICAgIHRocm90dGxlKFwicmVzaXplXCIsIFwib3B0aW1pemVkUmVzaXplXCIpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0b2dnbGVGaXhlZChlbCkge1xyXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XHJcbiAgICAgICAgbGV0IGZpeGVkV2lkdGggPSB3aW5kb3cuc2NyZWVuLndpZHRoID4gMTAyNCA/IGVsZW1lbnQucGFyZW50RWxlbWVudC5jbGllbnRXaWR0aCAtIDI4NSA6IGVsZW1lbnQucGFyZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gZml4ZWRXaWR0aCArICdweCc7XHJcblxyXG5cclxuICAgICAgICAvLyB2YXIgcGFyZW50d2lkdGggPSAkKFwiLnBhcmVudFwiKS53aWR0aCgpO1xyXG4gICAgICAgIC8vICQoXCIuY2hpbGRcIikudG9nZ2xlQ2xhc3MoXCJmaXhlZFwiKS53aWR0aChwYXJlbnR3aWR0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaGFtYnVyZ2VyIG9wZW4vY2xvc2UgYW5pbWF0aW9uXHJcbiAgICBjb25zdCB0cmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNoYW1idXJnZXJcIik7XHJcbiAgICBjb25zdCBtb2JpbGVOYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vYmlsZS1uYXZcIik7XHJcbiAgICBsZXQgaXNDbG9zZWQgPSB0cnVlO1xyXG5cclxuICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJ1cmdlclRpbWUpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGJ1cmdlclRpbWUoKSB7XHJcbiAgICAgICAgaWYgKGlzQ2xvc2VkID09IHRydWUpIHtcclxuICAgICAgICAgICAgdHJpZ2dlci5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtb3BlblwiKTtcclxuICAgICAgICAgICAgdHJpZ2dlci5jbGFzc0xpc3QuYWRkKFwiaXMtY2xvc2VkXCIpO1xyXG4gICAgICAgICAgICBtb2JpbGVOYXYuY2xhc3NMaXN0LmFkZCgnaXMtb3BlbicpO1xyXG4gICAgICAgICAgICBpc0Nsb3NlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXIuY2xhc3NMaXN0LnJlbW92ZShcImlzLWNsb3NlZFwiKTtcclxuICAgICAgICAgICAgdHJpZ2dlci5jbGFzc0xpc3QuYWRkKFwiaXMtb3BlblwiKTtcclxuICAgICAgICAgICAgbW9iaWxlTmF2LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLW9wZW4nKTtcclxuICAgICAgICAgICAgaXNDbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBzZWFyY2ggZm9ybSBvcGVuL2Nsb3NlIGFuaW1hdGlvblxyXG4gICAgY29uc3Qgc2VhcmNoQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybV9fYnRuXCIpO1xyXG4gICAgc2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHR0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJjbG9zZVwiKTtcclxuXHRcdHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZy5jbGFzc0xpc3QudG9nZ2xlKFwiaW5jbGlja2VkXCIpO1xyXG5cdFx0dGhpcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnZhbHVlID0gXCJcIjtcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIuanMtcHJvZHVjdC1zbGlkZXItcHJldmlld1wiKS5zbGljayh7XHJcbiAgICAgICAgc2xpZGVzVG9TaG93OiA0LFxyXG4gICAgICAgIHZlcnRpY2FsOiB0cnVlLFxyXG4gICAgICAgIHZlcnRpY2FsU3dpcGluZzogdHJ1ZSxcclxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcclxuICAgICAgICBmb2N1c09uU2VsZWN0OiB0cnVlLFxyXG4gICAgICAgIHByZXZBcnJvdzogXCIucHJvZHVjdC1zbGlkZXItcHJldmlld19fYnRuLS1wcmV2XCIsXHJcbiAgICAgICAgbmV4dEFycm93OiBcIi5wcm9kdWN0LXNsaWRlci1wcmV2aWV3X19idG4tLW5leHRcIixcclxuICAgICAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxyXG4gICAgICAgIGFzTmF2Rm9yOiBcIi5wcm9kdWN0LXNsaWRlci1tYWluXCJcclxuICAgIH0pO1xyXG4gICAgJChcIi5wcm9kdWN0LXNsaWRlci1tYWluXCIpLnNsaWNrKHtcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICBmYWRlOiB0cnVlLFxyXG4gICAgICAgIGFzTmF2Rm9yOiBcIi5qcy1wcm9kdWN0LXNsaWRlci1wcmV2aWV3XCJcclxuICAgIH0pO1xyXG4gICAgJChcIi5wcm9kdWN0LXRhYmxlX19yb3dcIikuZXEoMikuYWRkQ2xhc3MoXCJjdXJyZW50XCIpO1xyXG59KSgpOyJdLCJmaWxlIjoibWFpbi5qcyJ9
