"use strict";

;

(function () {
  cropText();
  hideBlock();
  var readMore = document.querySelectorAll('.js-read-more');
  readMore.forEach(function (el) {
    el.addEventListener('click', function () {
      var elText = el.innerText;
      var hiddenText = el.previousElementSibling;
      el.innerText = elText == 'read more >' ? 'hide' : 'read more >';
      hiddenText.classList.toggle('show');
    });
  });

  function cropText() {
    var max = 200;
    var text = document.querySelectorAll('.js-read-more-text');
    text.forEach(function (el) {
      var str = el.innerText.trim();

      if (str.length > max) {
        var subStr = str.substring(0, max);
        var hiddenStr = str.substring(max, str.length);
        el.innerText = subStr;
        el.innerHTML += "<span class=\"hidden-text js-hidden-text\">".concat(hiddenStr, "</span>");
        el.innerHTML += '<span class="read-more js-read-more">read more ></span>';
      }
    });
  }

  var showReview = document.querySelectorAll('.js-show-review');
  showReview.forEach(function (el) {
    el.addEventListener('click', function () {
      var elText = el.innerText;
      var hiddenText = el.previousElementSibling;
      var images = el.nextElementSibling;
      el.innerText = elText == 'read more >' ? '< hide' : 'read more >';
      hiddenText.classList.toggle('show');
      images.classList.toggle("show");
    });
  });

  function hideBlock() {
    var max = 128;
    var productReview = document.querySelectorAll('.js-hide-review');
    productReview.forEach(function (el) {
      var productText = el.querySelector(".page-text");
      var str = productText.innerText.trim();
      var images = el.querySelector('.product-review__images');

      if (str.length > max) {
        var subStr = str.substring(0, max);
        var hiddenStr = str.substring(max, str.length);
        productText.innerText = subStr;
        var hiddenText = document.createElement('span');
        hiddenText.classList.add('hidden-text', 'page-text', 'js-hidden-text');
        hiddenText.textContent = hiddenStr;
        productText.after(hiddenText);
      }

      var readMore = document.createElement('span');
      readMore.classList.add('read-more', 'js-show-review');
      readMore.textContent = 'read more >';
      images.before(readMore);
    });
  }

  var accordions = document.querySelectorAll(".accordion__item");

  var openAccordion = function openAccordion(accordion) {
    var content = accordion.querySelector(".accordion__body");
    accordion.classList.add("active");
    content.style.maxHeight = content.scrollHeight + "px";
  };

  var closeAccordion = function closeAccordion(accordion) {
    var content = accordion.querySelector(".accordion__body");
    accordion.classList.remove("active");
    content.style.maxHeight = null;
  };

  accordions.forEach(function (accordion) {
    var intro = accordion.querySelector(".accordion__header");
    var content = accordion.querySelector(".accordion__body");

    intro.onclick = function () {
      if (content.style.maxHeight) {
        closeAccordion(accordion);
      } else {
        // accordions.forEach((accordion) => closeAccordion(accordion));
        openAccordion(accordion);
      }
    };
  });
  var sidebarLinks = document.querySelectorAll(".sidebar-menu__link");
  sidebarLinks.forEach(function (elem) {
    return elem.addEventListener("click", navbarLinkClick);
  });

  function navbarLinkClick(event) {
    smoothScroll(event);
  }

  function smoothScroll(event) {
    event.preventDefault();
    var targetId = event.currentTarget.getAttribute("href");

    if (window.screen.width > 1024) {
      window.scrollTo({
        top: targetId === "#" ? 0 : document.querySelector(targetId).offsetTop - 100,
        behavior: "smooth"
      });
    } else {
      window.scrollTo({
        top: targetId === "#" ? 0 : document.querySelector(targetId).offsetTop - 200,
        behavior: "smooth"
      });
    }
  }

  if (document.querySelector('.products-sticky') !== null) {
    window.addEventListener('optimizedResize', function () {
      toggleFixed('.products-sticky');
    });
    toggleFixed('.products-sticky');
    throttle("resize", "optimizedResize");
  }

  var stickyBlockCoords = document.querySelector('.sticky-block').getBoundingClientRect().bottom + window.pageYOffset;
  window.addEventListener("scroll", function () {
    trackScroll('.sticky-block');
  });

  function trackScroll(elements) {
    var stickyBlocks = document.querySelectorAll(elements);
    stickyBlocks.forEach(function (el) {
      if (el.classList.contains('show') && window.pageYOffset < stickyBlockCoords) {
        el.classList.remove('show');
      } else if (window.pageYOffset > stickyBlockCoords) {
        el.classList.add('show');
      }
    });
  }

  function throttle(type, name, obj) {
    obj = obj || window;
    var running = false;

    var func = function func() {
      if (running) {
        return;
      }

      running = true;
      requestAnimationFrame(function () {
        obj.dispatchEvent(new CustomEvent(name));
        running = false;
      });
    };

    obj.addEventListener(type, func);
  }

  ;

  function toggleFixed(el) {
    var element = document.querySelector(el);
    var fixedWidth = window.screen.width > 1024 ? element.parentElement.clientWidth - 285 : element.parentElement.clientWidth;
    element.style.width = fixedWidth + 'px';
  } // hamburger open/close animation


  var trigger = document.querySelector("#hamburger");
  var mobileNav = document.querySelector("#mobile-nav");
  var isClosed = true;
  trigger.addEventListener("click", burgerTime);

  function burgerTime() {
    if (isClosed == true) {
      trigger.classList.remove("is-open");
      trigger.classList.add("is-closed");
      mobileNav.classList.add('is-open');
      isClosed = false;
    } else {
      trigger.classList.remove("is-closed");
      trigger.classList.add("is-open");
      mobileNav.classList.remove('is-open');
      isClosed = true;
    }
  } // search form open/close animation


  var searchBtn = document.querySelector(".search-form__btn");
  searchBtn.addEventListener("click", function () {
    this.classList.toggle("close");
    this.previousElementSibling.classList.toggle("inclicked");
    this.previousElementSibling.value = "";
  });
  var productReviewStars = document.querySelectorAll(".product-review__stars");
  productReviewStars.forEach(function (el) {
    var dataRating = el.getAttribute("data-rating");
    var stars = el.children;

    for (var i = 0; i < dataRating; i++) {
      stars[i].classList.add("active");
    }
  });
  document.addEventListener("click", function (e) {
    if (e.target.classList.contains("js-open-dropdown") && window.screen.width <= 576) {
      var caretDropdown = e.target.nextElementSibling;
      var parent = e.target.parentElement;
      var dropdown = parent.nextElementSibling;

      if (dropdown.style.maxHeight) {
        dropdown.style.maxHeight = null;
        dropdown.style.opacity = null;
        caretDropdown.classList.remove("active");
      } else {
        dropdown.style.maxHeight = dropdown.scrollHeight + "px";
        dropdown.style.opacity = 1;
        caretDropdown.classList.add("active");
      }
    }
  });

  var basicScrollTop = function basicScrollTop() {
    var btnTop = document.querySelector('.js-btn-go-top');

    var btnReveal = function btnReveal() {
      if (window.scrollY >= 300) {
        btnTop.classList.add('is-visible');
      } else {
        btnTop.classList.remove('is-visible');
      }
    };

    var TopscrollTo = function TopscrollTo() {
      if (window.scrollY != 0) {
        setTimeout(function () {
          window.scrollTo(0, window.scrollY - 30);
          TopscrollTo();
        }, 10);
      }
    };

    window.addEventListener('scroll', btnReveal);
    btnTop.addEventListener('click', TopscrollTo);
  };

  basicScrollTop();

  var openModal = function openModal() {
    var modalBtn = document.querySelectorAll(".js-modal");
    var modalContainer = document.querySelector(".modal-background");
    modalBtn.forEach(function (el) {
      el.addEventListener("click", function () {
        document.body.classList.add("modal-active");
        modalContainer.classList.remove("out");
        modalContainer.classList.add("opened");
      });
    });
    document.addEventListener("click", function (e) {
      if (e.target.classList.contains("modal-container") || e.target.classList.contains("modal-close")) {
        document.body.classList.remove("modal-active");
        modalContainer.classList.remove("opened");
        modalContainer.classList.add("out");
      }
    });
    document.addEventListener("keydown", function (e) {
      if (e.keyCode == 27) {
        document.body.classList.remove("modal-active");
        modalContainer.classList.remove("opened");
        modalContainer.classList.add("out");
      }
    });
  };

  openModal();

  var seeMore = function seeMore(number, elements, button) {
    window.addEventListener("load", function () {
      return showHideBlocks(number, elements, button);
    });
    window.addEventListener("resize", function () {
      return showHideBlocks(number, elements, button);
    });
    document.querySelector(button).addEventListener("click", function () {
      if (this.textContent == "See more") {
        this.textContent = "See less";
        this.classList.add("active");
      } else {
        this.textContent = "See more";
        this.classList.remove("active");
      }

      document.querySelectorAll(elements).forEach(function (elem, index) {
        if (elem.style.display == "none") {
          elem.style.display = null;
        } else {
          if (index > number) {
            elem.style.display = 'none';
          }
        }
      });
    });

    function showHideBlocks(number, elements, button) {
      var elems = document.querySelectorAll(elements);
      var btnShowHide = document.querySelector(button);

      if (window.screen.width <= 800 && elems.length > number) {
        elems.forEach(function (elem, index) {
          if (index > number) {
            elem.style.display = 'none';
            btnShowHide.style.display = null;
          }
        });
      } else {
        elems.forEach(function (elem, index) {
          elem.style.display = null;
          btnShowHide.style.display = 'none';
        });
      }
    }
  };

  seeMore(3, '.product-compare-top__item', '.js-see-more-products');
  seeMore(1, '.help-center__item', '.js-see-more-help');

  var showFooterLinks = function showFooterLinks() {
    var footerTitle = document.querySelectorAll('.footer__title');
    var footerLinks = document.querySelectorAll('.footer__links'); // window.addEventListener('load', () => showHideLinks);

    window.addEventListener('resize', function () {
      if (window.screen.width <= 576) {
        footerLinks.forEach(function (footerLink) {
          footerLink.style.maxHeight = 0;
        });
      } else {
        footerLinks.forEach(function (footerLink) {
          footerLink.style.maxHeight = null;
        });
      }
    });
    footerTitle.forEach(function (title) {
      title.addEventListener('click', function () {
        var footerLinks = this.nextElementSibling;

        if (getComputedStyle(footerLinks).maxHeight == '0px') {
          this.classList.add('active');
          footerLinks.style.maxHeight = footerLinks.scrollHeight + "px";
          footerLinks.style.opacity = 1;
        } else {
          this.classList.remove('active');
          footerLinks.style.maxHeight = null;
          footerLinks.style.opacity = null;
        }
      });
    });
  };

  showFooterLinks();
  $(".js-product-slider-preview").slick({
    slidesToShow: 4,
    vertical: true,
    verticalSwiping: true,
    slidesToScroll: 1,
    focusOnSelect: true,
    prevArrow: ".product-slider-preview__btn--prev",
    nextArrow: ".product-slider-preview__btn--next",
    variableWidth: true,
    asNavFor: ".product-slider-main"
  });
  $(".product-slider-main").slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    arrows: false,
    fade: true,
    asNavFor: ".js-product-slider-preview"
  });
  $(".js-product-compare-slider").slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    prevArrow: ".product-compare-slider__btn--prev",
    nextArrow: ".product-compare-slider__btn--next" // variableWidth: true,

  });
  $(".js-related-products-slider").slick({
    slidesToShow: 3,
    slidesToScroll: 1,
    prevArrow: ".js-related-prev",
    nextArrow: ".js-related-next",
    responsive: [{
      breakpoint: 768,
      settings: {
        slidesToShow: 2
      }
    }, {
      breakpoint: 576,
      settings: {
        slidesToShow: 1
      }
    }]
  });
  $(".js-resently-viewed-slider").slick({
    slidesToShow: 4,
    slidesToScroll: 1,
    prevArrow: ".js-resently-viewed-prev",
    nextArrow: ".js-resently-viewed-next",
    responsive: [{
      breakpoint: 992,
      settings: {
        slidesToShow: 3
      }
    }, {
      breakpoint: 768,
      settings: {
        slidesToShow: 2
      }
    }, {
      breakpoint: 576,
      settings: {
        slidesToShow: 1
      }
    }]
  });
  $('body').on('keyup', '.js-search-matches', function () {
    var self = $(this);
    var list = $('.' + self.data('list'));
    $.ajax({
      url: self.data('url') + '?q=' + self.val(),
      type: 'GET',
      dataType: 'json',
      success: function success(response) {
        list.empty();

        if (response.items.length) {
          $.each(response.items, function (i, item) {
            list.append("<a class=\"search-form-matches__link\" href=\"".concat(item.url, "\">").concat(item.title, "</a>"));
          });
        }
      }
    });
  });
  $(".product-table__row").eq(2).addClass("current");
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY3JvcFRleHQiLCJoaWRlQmxvY2siLCJyZWFkTW9yZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbFRleHQiLCJpbm5lclRleHQiLCJoaWRkZW5UZXh0IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm1heCIsInRleHQiLCJzdHIiLCJ0cmltIiwibGVuZ3RoIiwic3ViU3RyIiwic3Vic3RyaW5nIiwiaGlkZGVuU3RyIiwiaW5uZXJIVE1MIiwic2hvd1JldmlldyIsImltYWdlcyIsIm5leHRFbGVtZW50U2libGluZyIsInByb2R1Y3RSZXZpZXciLCJwcm9kdWN0VGV4dCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50IiwiYWRkIiwidGV4dENvbnRlbnQiLCJhZnRlciIsImJlZm9yZSIsImFjY29yZGlvbnMiLCJvcGVuQWNjb3JkaW9uIiwiYWNjb3JkaW9uIiwiY29udGVudCIsInN0eWxlIiwibWF4SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiY2xvc2VBY2NvcmRpb24iLCJyZW1vdmUiLCJpbnRybyIsIm9uY2xpY2siLCJzaWRlYmFyTGlua3MiLCJlbGVtIiwibmF2YmFyTGlua0NsaWNrIiwiZXZlbnQiLCJzbW9vdGhTY3JvbGwiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldElkIiwiY3VycmVudFRhcmdldCIsImdldEF0dHJpYnV0ZSIsIndpbmRvdyIsInNjcmVlbiIsIndpZHRoIiwic2Nyb2xsVG8iLCJ0b3AiLCJvZmZzZXRUb3AiLCJiZWhhdmlvciIsInRvZ2dsZUZpeGVkIiwidGhyb3R0bGUiLCJzdGlja3lCbG9ja0Nvb3JkcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJvdHRvbSIsInBhZ2VZT2Zmc2V0IiwidHJhY2tTY3JvbGwiLCJlbGVtZW50cyIsInN0aWNreUJsb2NrcyIsImNvbnRhaW5zIiwidHlwZSIsIm5hbWUiLCJvYmoiLCJydW5uaW5nIiwiZnVuYyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImVsZW1lbnQiLCJmaXhlZFdpZHRoIiwicGFyZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwidHJpZ2dlciIsIm1vYmlsZU5hdiIsImlzQ2xvc2VkIiwiYnVyZ2VyVGltZSIsInNlYXJjaEJ0biIsInZhbHVlIiwicHJvZHVjdFJldmlld1N0YXJzIiwiZGF0YVJhdGluZyIsInN0YXJzIiwiY2hpbGRyZW4iLCJpIiwiZSIsInRhcmdldCIsImNhcmV0RHJvcGRvd24iLCJwYXJlbnQiLCJkcm9wZG93biIsIm9wYWNpdHkiLCJiYXNpY1Njcm9sbFRvcCIsImJ0blRvcCIsImJ0blJldmVhbCIsInNjcm9sbFkiLCJUb3BzY3JvbGxUbyIsInNldFRpbWVvdXQiLCJvcGVuTW9kYWwiLCJtb2RhbEJ0biIsIm1vZGFsQ29udGFpbmVyIiwiYm9keSIsImtleUNvZGUiLCJzZWVNb3JlIiwibnVtYmVyIiwiYnV0dG9uIiwic2hvd0hpZGVCbG9ja3MiLCJpbmRleCIsImRpc3BsYXkiLCJlbGVtcyIsImJ0blNob3dIaWRlIiwic2hvd0Zvb3RlckxpbmtzIiwiZm9vdGVyVGl0bGUiLCJmb290ZXJMaW5rcyIsImZvb3RlckxpbmsiLCJ0aXRsZSIsImdldENvbXB1dGVkU3R5bGUiLCIkIiwic2xpY2siLCJzbGlkZXNUb1Nob3ciLCJ2ZXJ0aWNhbCIsInZlcnRpY2FsU3dpcGluZyIsInNsaWRlc1RvU2Nyb2xsIiwiZm9jdXNPblNlbGVjdCIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsInZhcmlhYmxlV2lkdGgiLCJhc05hdkZvciIsImFycm93cyIsImZhZGUiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwib24iLCJzZWxmIiwibGlzdCIsImRhdGEiLCJhamF4IiwidXJsIiwidmFsIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJlbXB0eSIsIml0ZW1zIiwiZWFjaCIsIml0ZW0iLCJhcHBlbmQiLCJlcSIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBLENBQUMsWUFBWTtBQUNUQSxFQUFBQSxRQUFRO0FBQ1JDLEVBQUFBLFNBQVM7QUFFVCxNQUFJQyxRQUFRLEdBQUdDLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsZUFBMUIsQ0FBZjtBQUVBRixFQUFBQSxRQUFRLENBQUNHLE9BQVQsQ0FBaUIsVUFBQUMsRUFBRSxFQUFJO0FBQ25CQSxJQUFBQSxFQUFFLENBQUNDLGdCQUFILENBQW9CLE9BQXBCLEVBQTZCLFlBQU07QUFDL0IsVUFBSUMsTUFBTSxHQUFHRixFQUFFLENBQUNHLFNBQWhCO0FBQ0EsVUFBSUMsVUFBVSxHQUFHSixFQUFFLENBQUNLLHNCQUFwQjtBQUVBTCxNQUFBQSxFQUFFLENBQUNHLFNBQUgsR0FBZUQsTUFBTSxJQUFJLGFBQVYsR0FBMEIsTUFBMUIsR0FBbUMsYUFBbEQ7QUFDQUUsTUFBQUEsVUFBVSxDQUFDRSxTQUFYLENBQXFCQyxNQUFyQixDQUE0QixNQUE1QjtBQUNILEtBTkQ7QUFPSCxHQVJEOztBQVVBLFdBQVNiLFFBQVQsR0FBb0I7QUFDaEIsUUFBSWMsR0FBRyxHQUFHLEdBQVY7QUFDQSxRQUFJQyxJQUFJLEdBQUdaLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsb0JBQTFCLENBQVg7QUFDQVcsSUFBQUEsSUFBSSxDQUFDVixPQUFMLENBQWEsVUFBQUMsRUFBRSxFQUFJO0FBQ2YsVUFBSVUsR0FBRyxHQUFHVixFQUFFLENBQUNHLFNBQUgsQ0FBYVEsSUFBYixFQUFWOztBQUNBLFVBQUlELEdBQUcsQ0FBQ0UsTUFBSixHQUFhSixHQUFqQixFQUFzQjtBQUNsQixZQUFJSyxNQUFNLEdBQUdILEdBQUcsQ0FBQ0ksU0FBSixDQUFjLENBQWQsRUFBaUJOLEdBQWpCLENBQWI7QUFDQSxZQUFJTyxTQUFTLEdBQUdMLEdBQUcsQ0FBQ0ksU0FBSixDQUFjTixHQUFkLEVBQW1CRSxHQUFHLENBQUNFLE1BQXZCLENBQWhCO0FBQ0FaLFFBQUFBLEVBQUUsQ0FBQ0csU0FBSCxHQUFlVSxNQUFmO0FBQ0FiLFFBQUFBLEVBQUUsQ0FBQ2dCLFNBQUgseURBQTRERCxTQUE1RDtBQUNBZixRQUFBQSxFQUFFLENBQUNnQixTQUFILElBQWdCLHlEQUFoQjtBQUNIO0FBQ0osS0FURDtBQVVIOztBQUVELE1BQUlDLFVBQVUsR0FBR3BCLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsaUJBQTFCLENBQWpCO0FBRUFtQixFQUFBQSxVQUFVLENBQUNsQixPQUFYLENBQW1CLFVBQUFDLEVBQUUsRUFBSTtBQUNyQkEsSUFBQUEsRUFBRSxDQUFDQyxnQkFBSCxDQUFvQixPQUFwQixFQUE2QixZQUFNO0FBQy9CLFVBQUlDLE1BQU0sR0FBR0YsRUFBRSxDQUFDRyxTQUFoQjtBQUNBLFVBQUlDLFVBQVUsR0FBR0osRUFBRSxDQUFDSyxzQkFBcEI7QUFDQSxVQUFJYSxNQUFNLEdBQUdsQixFQUFFLENBQUNtQixrQkFBaEI7QUFFQW5CLE1BQUFBLEVBQUUsQ0FBQ0csU0FBSCxHQUFlRCxNQUFNLElBQUksYUFBVixHQUEwQixRQUExQixHQUFxQyxhQUFwRDtBQUNBRSxNQUFBQSxVQUFVLENBQUNFLFNBQVgsQ0FBcUJDLE1BQXJCLENBQTRCLE1BQTVCO0FBQ0FXLE1BQUFBLE1BQU0sQ0FBQ1osU0FBUCxDQUFpQkMsTUFBakIsQ0FBd0IsTUFBeEI7QUFDSCxLQVJEO0FBU0gsR0FWRDs7QUFZQSxXQUFTWixTQUFULEdBQXFCO0FBQ2pCLFFBQUlhLEdBQUcsR0FBRyxHQUFWO0FBQ0EsUUFBSVksYUFBYSxHQUFHdkIsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixpQkFBMUIsQ0FBcEI7QUFDQXNCLElBQUFBLGFBQWEsQ0FBQ3JCLE9BQWQsQ0FBc0IsVUFBQUMsRUFBRSxFQUFJO0FBQ3hCLFVBQUlxQixXQUFXLEdBQUdyQixFQUFFLENBQUNzQixhQUFILENBQWlCLFlBQWpCLENBQWxCO0FBQ0EsVUFBSVosR0FBRyxHQUFHVyxXQUFXLENBQUNsQixTQUFaLENBQXNCUSxJQUF0QixFQUFWO0FBQ0EsVUFBSU8sTUFBTSxHQUFHbEIsRUFBRSxDQUFDc0IsYUFBSCxDQUFpQix5QkFBakIsQ0FBYjs7QUFDQSxVQUFJWixHQUFHLENBQUNFLE1BQUosR0FBYUosR0FBakIsRUFBc0I7QUFDbEIsWUFBSUssTUFBTSxHQUFHSCxHQUFHLENBQUNJLFNBQUosQ0FBYyxDQUFkLEVBQWlCTixHQUFqQixDQUFiO0FBQ0EsWUFBSU8sU0FBUyxHQUFHTCxHQUFHLENBQUNJLFNBQUosQ0FBY04sR0FBZCxFQUFtQkUsR0FBRyxDQUFDRSxNQUF2QixDQUFoQjtBQUNBUyxRQUFBQSxXQUFXLENBQUNsQixTQUFaLEdBQXdCVSxNQUF4QjtBQUVBLFlBQUlULFVBQVUsR0FBR1AsUUFBUSxDQUFDMEIsYUFBVCxDQUF1QixNQUF2QixDQUFqQjtBQUNBbkIsUUFBQUEsVUFBVSxDQUFDRSxTQUFYLENBQXFCa0IsR0FBckIsQ0FBeUIsYUFBekIsRUFBd0MsV0FBeEMsRUFBcUQsZ0JBQXJEO0FBQ0FwQixRQUFBQSxVQUFVLENBQUNxQixXQUFYLEdBQXlCVixTQUF6QjtBQUVBTSxRQUFBQSxXQUFXLENBQUNLLEtBQVosQ0FBa0J0QixVQUFsQjtBQUVIOztBQUVELFVBQUlSLFFBQVEsR0FBR0MsUUFBUSxDQUFDMEIsYUFBVCxDQUF1QixNQUF2QixDQUFmO0FBQ0EzQixNQUFBQSxRQUFRLENBQUNVLFNBQVQsQ0FBbUJrQixHQUFuQixDQUF1QixXQUF2QixFQUFvQyxnQkFBcEM7QUFDQTVCLE1BQUFBLFFBQVEsQ0FBQzZCLFdBQVQsR0FBdUIsYUFBdkI7QUFFQVAsTUFBQUEsTUFBTSxDQUFDUyxNQUFQLENBQWMvQixRQUFkO0FBQ0gsS0F0QkQ7QUF1Qkg7O0FBRUQsTUFBTWdDLFVBQVUsR0FBRy9CLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsa0JBQTFCLENBQW5COztBQUVBLE1BQU0rQixhQUFhLEdBQUcsU0FBaEJBLGFBQWdCLENBQUFDLFNBQVMsRUFBSTtBQUMvQixRQUFNQyxPQUFPLEdBQUdELFNBQVMsQ0FBQ1IsYUFBVixDQUF3QixrQkFBeEIsQ0FBaEI7QUFDQVEsSUFBQUEsU0FBUyxDQUFDeEIsU0FBVixDQUFvQmtCLEdBQXBCLENBQXdCLFFBQXhCO0FBQ0FPLElBQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUFjQyxTQUFkLEdBQTBCRixPQUFPLENBQUNHLFlBQVIsR0FBdUIsSUFBakQ7QUFDSCxHQUpEOztBQU1BLE1BQU1DLGNBQWMsR0FBRyxTQUFqQkEsY0FBaUIsQ0FBQUwsU0FBUyxFQUFJO0FBQ2hDLFFBQU1DLE9BQU8sR0FBR0QsU0FBUyxDQUFDUixhQUFWLENBQXdCLGtCQUF4QixDQUFoQjtBQUNBUSxJQUFBQSxTQUFTLENBQUN4QixTQUFWLENBQW9COEIsTUFBcEIsQ0FBMkIsUUFBM0I7QUFDQUwsSUFBQUEsT0FBTyxDQUFDQyxLQUFSLENBQWNDLFNBQWQsR0FBMEIsSUFBMUI7QUFDSCxHQUpEOztBQU1BTCxFQUFBQSxVQUFVLENBQUM3QixPQUFYLENBQW1CLFVBQUErQixTQUFTLEVBQUk7QUFDNUIsUUFBTU8sS0FBSyxHQUFHUCxTQUFTLENBQUNSLGFBQVYsQ0FBd0Isb0JBQXhCLENBQWQ7QUFDQSxRQUFNUyxPQUFPLEdBQUdELFNBQVMsQ0FBQ1IsYUFBVixDQUF3QixrQkFBeEIsQ0FBaEI7O0FBRUFlLElBQUFBLEtBQUssQ0FBQ0MsT0FBTixHQUFnQixZQUFNO0FBQ2xCLFVBQUlQLE9BQU8sQ0FBQ0MsS0FBUixDQUFjQyxTQUFsQixFQUE2QjtBQUN6QkUsUUFBQUEsY0FBYyxDQUFDTCxTQUFELENBQWQ7QUFDSCxPQUZELE1BRU87QUFDSDtBQUNBRCxRQUFBQSxhQUFhLENBQUNDLFNBQUQsQ0FBYjtBQUNIO0FBQ0osS0FQRDtBQVFILEdBWkQ7QUFjQSxNQUFNUyxZQUFZLEdBQUcxQyxRQUFRLENBQUNDLGdCQUFULENBQTBCLHFCQUExQixDQUFyQjtBQUVBeUMsRUFBQUEsWUFBWSxDQUFDeEMsT0FBYixDQUFxQixVQUFBeUMsSUFBSTtBQUFBLFdBQUlBLElBQUksQ0FBQ3ZDLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCd0MsZUFBL0IsQ0FBSjtBQUFBLEdBQXpCOztBQUVBLFdBQVNBLGVBQVQsQ0FBeUJDLEtBQXpCLEVBQWdDO0FBQzVCQyxJQUFBQSxZQUFZLENBQUNELEtBQUQsQ0FBWjtBQUNIOztBQUVELFdBQVNDLFlBQVQsQ0FBc0JELEtBQXRCLEVBQTZCO0FBQ3pCQSxJQUFBQSxLQUFLLENBQUNFLGNBQU47QUFDQSxRQUFNQyxRQUFRLEdBQUdILEtBQUssQ0FBQ0ksYUFBTixDQUFvQkMsWUFBcEIsQ0FBaUMsTUFBakMsQ0FBakI7O0FBQ0EsUUFBSUMsTUFBTSxDQUFDQyxNQUFQLENBQWNDLEtBQWQsR0FBc0IsSUFBMUIsRUFBZ0M7QUFDNUJGLE1BQUFBLE1BQU0sQ0FBQ0csUUFBUCxDQUFnQjtBQUNaQyxRQUFBQSxHQUFHLEVBQUVQLFFBQVEsS0FBSyxHQUFiLEdBQW1CLENBQW5CLEdBQXVCaEQsUUFBUSxDQUFDeUIsYUFBVCxDQUF1QnVCLFFBQXZCLEVBQWlDUSxTQUFqQyxHQUE2QyxHQUQ3RDtBQUVaQyxRQUFBQSxRQUFRLEVBQUU7QUFGRSxPQUFoQjtBQUlILEtBTEQsTUFLTztBQUNITixNQUFBQSxNQUFNLENBQUNHLFFBQVAsQ0FBZ0I7QUFDWkMsUUFBQUEsR0FBRyxFQUFFUCxRQUFRLEtBQUssR0FBYixHQUFtQixDQUFuQixHQUF1QmhELFFBQVEsQ0FBQ3lCLGFBQVQsQ0FBdUJ1QixRQUF2QixFQUFpQ1EsU0FBakMsR0FBNkMsR0FEN0Q7QUFFWkMsUUFBQUEsUUFBUSxFQUFFO0FBRkUsT0FBaEI7QUFJSDtBQUNKOztBQUVELE1BQUl6RCxRQUFRLENBQUN5QixhQUFULENBQXVCLGtCQUF2QixNQUErQyxJQUFuRCxFQUF5RDtBQUVyRDBCLElBQUFBLE1BQU0sQ0FBQy9DLGdCQUFQLENBQXdCLGlCQUF4QixFQUEyQyxZQUFNO0FBQzdDc0QsTUFBQUEsV0FBVyxDQUFDLGtCQUFELENBQVg7QUFDSCxLQUZEO0FBS0FBLElBQUFBLFdBQVcsQ0FBQyxrQkFBRCxDQUFYO0FBRUFDLElBQUFBLFFBQVEsQ0FBQyxRQUFELEVBQVcsaUJBQVgsQ0FBUjtBQUVIOztBQUNELE1BQUlDLGlCQUFpQixHQUFHNUQsUUFBUSxDQUFDeUIsYUFBVCxDQUF1QixlQUF2QixFQUF3Q29DLHFCQUF4QyxHQUFnRUMsTUFBaEUsR0FBeUVYLE1BQU0sQ0FBQ1ksV0FBeEc7QUFFQVosRUFBQUEsTUFBTSxDQUFDL0MsZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0MsWUFBWTtBQUMxQzRELElBQUFBLFdBQVcsQ0FBQyxlQUFELENBQVg7QUFDSCxHQUZEOztBQUlBLFdBQVNBLFdBQVQsQ0FBcUJDLFFBQXJCLEVBQStCO0FBQzNCLFFBQUlDLFlBQVksR0FBR2xFLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEJnRSxRQUExQixDQUFuQjtBQUNBQyxJQUFBQSxZQUFZLENBQUNoRSxPQUFiLENBQXFCLFVBQUFDLEVBQUUsRUFBSTtBQUN2QixVQUFJQSxFQUFFLENBQUNNLFNBQUgsQ0FBYTBELFFBQWIsQ0FBc0IsTUFBdEIsS0FBaUNoQixNQUFNLENBQUNZLFdBQVAsR0FBcUJILGlCQUExRCxFQUE2RTtBQUN6RXpELFFBQUFBLEVBQUUsQ0FBQ00sU0FBSCxDQUFhOEIsTUFBYixDQUFvQixNQUFwQjtBQUNILE9BRkQsTUFFTyxJQUFJWSxNQUFNLENBQUNZLFdBQVAsR0FBcUJILGlCQUF6QixFQUE0QztBQUMvQ3pELFFBQUFBLEVBQUUsQ0FBQ00sU0FBSCxDQUFha0IsR0FBYixDQUFpQixNQUFqQjtBQUNIO0FBQ0osS0FORDtBQU9IOztBQUVELFdBQVNnQyxRQUFULENBQWtCUyxJQUFsQixFQUF3QkMsSUFBeEIsRUFBOEJDLEdBQTlCLEVBQW1DO0FBQy9CQSxJQUFBQSxHQUFHLEdBQUdBLEdBQUcsSUFBSW5CLE1BQWI7QUFDQSxRQUFJb0IsT0FBTyxHQUFHLEtBQWQ7O0FBQ0EsUUFBSUMsSUFBSSxHQUFHLFNBQVBBLElBQU8sR0FBWTtBQUNuQixVQUFJRCxPQUFKLEVBQWE7QUFDVDtBQUNIOztBQUNEQSxNQUFBQSxPQUFPLEdBQUcsSUFBVjtBQUNBRSxNQUFBQSxxQkFBcUIsQ0FBQyxZQUFZO0FBQzlCSCxRQUFBQSxHQUFHLENBQUNJLGFBQUosQ0FBa0IsSUFBSUMsV0FBSixDQUFnQk4sSUFBaEIsQ0FBbEI7QUFDQUUsUUFBQUEsT0FBTyxHQUFHLEtBQVY7QUFDSCxPQUhvQixDQUFyQjtBQUlILEtBVEQ7O0FBVUFELElBQUFBLEdBQUcsQ0FBQ2xFLGdCQUFKLENBQXFCZ0UsSUFBckIsRUFBMkJJLElBQTNCO0FBQ0g7O0FBQUE7O0FBRUQsV0FBU2QsV0FBVCxDQUFxQnZELEVBQXJCLEVBQXlCO0FBQ3JCLFFBQUl5RSxPQUFPLEdBQUc1RSxRQUFRLENBQUN5QixhQUFULENBQXVCdEIsRUFBdkIsQ0FBZDtBQUNBLFFBQUkwRSxVQUFVLEdBQUcxQixNQUFNLENBQUNDLE1BQVAsQ0FBY0MsS0FBZCxHQUFzQixJQUF0QixHQUE2QnVCLE9BQU8sQ0FBQ0UsYUFBUixDQUFzQkMsV0FBdEIsR0FBb0MsR0FBakUsR0FBdUVILE9BQU8sQ0FBQ0UsYUFBUixDQUFzQkMsV0FBOUc7QUFDQUgsSUFBQUEsT0FBTyxDQUFDekMsS0FBUixDQUFja0IsS0FBZCxHQUFzQndCLFVBQVUsR0FBRyxJQUFuQztBQUVILEdBL0tRLENBaUxUOzs7QUFDQSxNQUFNRyxPQUFPLEdBQUdoRixRQUFRLENBQUN5QixhQUFULENBQXVCLFlBQXZCLENBQWhCO0FBQ0EsTUFBTXdELFNBQVMsR0FBR2pGLFFBQVEsQ0FBQ3lCLGFBQVQsQ0FBdUIsYUFBdkIsQ0FBbEI7QUFDQSxNQUFJeUQsUUFBUSxHQUFHLElBQWY7QUFFQUYsRUFBQUEsT0FBTyxDQUFDNUUsZ0JBQVIsQ0FBeUIsT0FBekIsRUFBa0MrRSxVQUFsQzs7QUFFQSxXQUFTQSxVQUFULEdBQXNCO0FBQ2xCLFFBQUlELFFBQVEsSUFBSSxJQUFoQixFQUFzQjtBQUNsQkYsTUFBQUEsT0FBTyxDQUFDdkUsU0FBUixDQUFrQjhCLE1BQWxCLENBQXlCLFNBQXpCO0FBQ0F5QyxNQUFBQSxPQUFPLENBQUN2RSxTQUFSLENBQWtCa0IsR0FBbEIsQ0FBc0IsV0FBdEI7QUFDQXNELE1BQUFBLFNBQVMsQ0FBQ3hFLFNBQVYsQ0FBb0JrQixHQUFwQixDQUF3QixTQUF4QjtBQUNBdUQsTUFBQUEsUUFBUSxHQUFHLEtBQVg7QUFDSCxLQUxELE1BS087QUFDSEYsTUFBQUEsT0FBTyxDQUFDdkUsU0FBUixDQUFrQjhCLE1BQWxCLENBQXlCLFdBQXpCO0FBQ0F5QyxNQUFBQSxPQUFPLENBQUN2RSxTQUFSLENBQWtCa0IsR0FBbEIsQ0FBc0IsU0FBdEI7QUFDQXNELE1BQUFBLFNBQVMsQ0FBQ3hFLFNBQVYsQ0FBb0I4QixNQUFwQixDQUEyQixTQUEzQjtBQUNBMkMsTUFBQUEsUUFBUSxHQUFHLElBQVg7QUFDSDtBQUNKLEdBcE1RLENBc01UOzs7QUFDQSxNQUFNRSxTQUFTLEdBQUdwRixRQUFRLENBQUN5QixhQUFULENBQXVCLG1CQUF2QixDQUFsQjtBQUNBMkQsRUFBQUEsU0FBUyxDQUFDaEYsZ0JBQVYsQ0FBMkIsT0FBM0IsRUFBb0MsWUFBWTtBQUM1QyxTQUFLSyxTQUFMLENBQWVDLE1BQWYsQ0FBc0IsT0FBdEI7QUFDQSxTQUFLRixzQkFBTCxDQUE0QkMsU0FBNUIsQ0FBc0NDLE1BQXRDLENBQTZDLFdBQTdDO0FBQ0EsU0FBS0Ysc0JBQUwsQ0FBNEI2RSxLQUE1QixHQUFvQyxFQUFwQztBQUNILEdBSkQ7QUFNQSxNQUFNQyxrQkFBa0IsR0FBR3RGLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsd0JBQTFCLENBQTNCO0FBQ0FxRixFQUFBQSxrQkFBa0IsQ0FBQ3BGLE9BQW5CLENBQTJCLFVBQVVDLEVBQVYsRUFBYztBQUNyQyxRQUFNb0YsVUFBVSxHQUFHcEYsRUFBRSxDQUFDK0MsWUFBSCxDQUFnQixhQUFoQixDQUFuQjtBQUNBLFFBQU1zQyxLQUFLLEdBQUdyRixFQUFFLENBQUNzRixRQUFqQjs7QUFDQSxTQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdILFVBQXBCLEVBQWdDRyxDQUFDLEVBQWpDLEVBQXFDO0FBQ2pDRixNQUFBQSxLQUFLLENBQUNFLENBQUQsQ0FBTCxDQUFTakYsU0FBVCxDQUFtQmtCLEdBQW5CLENBQXVCLFFBQXZCO0FBQ0g7QUFDSixHQU5EO0FBUUEzQixFQUFBQSxRQUFRLENBQUNJLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLFVBQVV1RixDQUFWLEVBQWE7QUFDNUMsUUFBSUEsQ0FBQyxDQUFDQyxNQUFGLENBQVNuRixTQUFULENBQW1CMEQsUUFBbkIsQ0FBNEIsa0JBQTVCLEtBQW1EaEIsTUFBTSxDQUFDQyxNQUFQLENBQWNDLEtBQWQsSUFBdUIsR0FBOUUsRUFBbUY7QUFDL0UsVUFBTXdDLGFBQWEsR0FBR0YsQ0FBQyxDQUFDQyxNQUFGLENBQVN0RSxrQkFBL0I7QUFDQSxVQUFNd0UsTUFBTSxHQUFHSCxDQUFDLENBQUNDLE1BQUYsQ0FBU2QsYUFBeEI7QUFDQSxVQUFNaUIsUUFBUSxHQUFHRCxNQUFNLENBQUN4RSxrQkFBeEI7O0FBQ0EsVUFBSXlFLFFBQVEsQ0FBQzVELEtBQVQsQ0FBZUMsU0FBbkIsRUFBOEI7QUFDMUIyRCxRQUFBQSxRQUFRLENBQUM1RCxLQUFULENBQWVDLFNBQWYsR0FBMkIsSUFBM0I7QUFDQTJELFFBQUFBLFFBQVEsQ0FBQzVELEtBQVQsQ0FBZTZELE9BQWYsR0FBeUIsSUFBekI7QUFDQUgsUUFBQUEsYUFBYSxDQUFDcEYsU0FBZCxDQUF3QjhCLE1BQXhCLENBQStCLFFBQS9CO0FBQ0gsT0FKRCxNQUlPO0FBQ0h3RCxRQUFBQSxRQUFRLENBQUM1RCxLQUFULENBQWVDLFNBQWYsR0FBMkIyRCxRQUFRLENBQUMxRCxZQUFULEdBQXdCLElBQW5EO0FBQ0EwRCxRQUFBQSxRQUFRLENBQUM1RCxLQUFULENBQWU2RCxPQUFmLEdBQXlCLENBQXpCO0FBQ0FILFFBQUFBLGFBQWEsQ0FBQ3BGLFNBQWQsQ0FBd0JrQixHQUF4QixDQUE0QixRQUE1QjtBQUNIO0FBQ0o7QUFDSixHQWZEOztBQWtCQSxNQUFNc0UsY0FBYyxHQUFHLFNBQWpCQSxjQUFpQixHQUFZO0FBQy9CLFFBQU1DLE1BQU0sR0FBR2xHLFFBQVEsQ0FBQ3lCLGFBQVQsQ0FBdUIsZ0JBQXZCLENBQWY7O0FBQ0EsUUFBTTBFLFNBQVMsR0FBRyxTQUFaQSxTQUFZLEdBQVk7QUFDMUIsVUFBSWhELE1BQU0sQ0FBQ2lELE9BQVAsSUFBa0IsR0FBdEIsRUFBMkI7QUFDdkJGLFFBQUFBLE1BQU0sQ0FBQ3pGLFNBQVAsQ0FBaUJrQixHQUFqQixDQUFxQixZQUFyQjtBQUNILE9BRkQsTUFFTztBQUNIdUUsUUFBQUEsTUFBTSxDQUFDekYsU0FBUCxDQUFpQjhCLE1BQWpCLENBQXdCLFlBQXhCO0FBQ0g7QUFDSixLQU5EOztBQU9BLFFBQU04RCxXQUFXLEdBQUcsU0FBZEEsV0FBYyxHQUFZO0FBQzVCLFVBQUlsRCxNQUFNLENBQUNpRCxPQUFQLElBQWtCLENBQXRCLEVBQXlCO0FBQ3JCRSxRQUFBQSxVQUFVLENBQUMsWUFBWTtBQUNuQm5ELFVBQUFBLE1BQU0sQ0FBQ0csUUFBUCxDQUFnQixDQUFoQixFQUFtQkgsTUFBTSxDQUFDaUQsT0FBUCxHQUFpQixFQUFwQztBQUNBQyxVQUFBQSxXQUFXO0FBQ2QsU0FIUyxFQUdQLEVBSE8sQ0FBVjtBQUlIO0FBQ0osS0FQRDs7QUFRQWxELElBQUFBLE1BQU0sQ0FBQy9DLGdCQUFQLENBQXdCLFFBQXhCLEVBQWtDK0YsU0FBbEM7QUFDQUQsSUFBQUEsTUFBTSxDQUFDOUYsZ0JBQVAsQ0FBd0IsT0FBeEIsRUFBaUNpRyxXQUFqQztBQUVILEdBcEJEOztBQXFCQUosRUFBQUEsY0FBYzs7QUFFZCxNQUFNTSxTQUFTLEdBQUcsU0FBWkEsU0FBWSxHQUFNO0FBQ3BCLFFBQU1DLFFBQVEsR0FBR3hHLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsV0FBMUIsQ0FBakI7QUFDQSxRQUFNd0csY0FBYyxHQUFHekcsUUFBUSxDQUFDeUIsYUFBVCxDQUF1QixtQkFBdkIsQ0FBdkI7QUFFQStFLElBQUFBLFFBQVEsQ0FBQ3RHLE9BQVQsQ0FBaUIsVUFBQUMsRUFBRSxFQUFJO0FBQ25CQSxNQUFBQSxFQUFFLENBQUNDLGdCQUFILENBQW9CLE9BQXBCLEVBQTZCLFlBQVk7QUFDckNKLFFBQUFBLFFBQVEsQ0FBQzBHLElBQVQsQ0FBY2pHLFNBQWQsQ0FBd0JrQixHQUF4QixDQUE0QixjQUE1QjtBQUNBOEUsUUFBQUEsY0FBYyxDQUFDaEcsU0FBZixDQUF5QjhCLE1BQXpCLENBQWdDLEtBQWhDO0FBQ0FrRSxRQUFBQSxjQUFjLENBQUNoRyxTQUFmLENBQXlCa0IsR0FBekIsQ0FBNkIsUUFBN0I7QUFDSCxPQUpEO0FBS0gsS0FORDtBQVFBM0IsSUFBQUEsUUFBUSxDQUFDSSxnQkFBVCxDQUEwQixPQUExQixFQUFtQyxVQUFVdUYsQ0FBVixFQUFhO0FBQzVDLFVBQ0lBLENBQUMsQ0FBQ0MsTUFBRixDQUFTbkYsU0FBVCxDQUFtQjBELFFBQW5CLENBQTRCLGlCQUE1QixLQUNBd0IsQ0FBQyxDQUFDQyxNQUFGLENBQVNuRixTQUFULENBQW1CMEQsUUFBbkIsQ0FBNEIsYUFBNUIsQ0FGSixFQUdFO0FBQ0VuRSxRQUFBQSxRQUFRLENBQUMwRyxJQUFULENBQWNqRyxTQUFkLENBQXdCOEIsTUFBeEIsQ0FBK0IsY0FBL0I7QUFDQWtFLFFBQUFBLGNBQWMsQ0FBQ2hHLFNBQWYsQ0FBeUI4QixNQUF6QixDQUFnQyxRQUFoQztBQUNBa0UsUUFBQUEsY0FBYyxDQUFDaEcsU0FBZixDQUF5QmtCLEdBQXpCLENBQTZCLEtBQTdCO0FBQ0g7QUFDSixLQVREO0FBVUEzQixJQUFBQSxRQUFRLENBQUNJLGdCQUFULENBQTBCLFNBQTFCLEVBQXFDLFVBQVV1RixDQUFWLEVBQWE7QUFDOUMsVUFBSUEsQ0FBQyxDQUFDZ0IsT0FBRixJQUFhLEVBQWpCLEVBQXFCO0FBQ2pCM0csUUFBQUEsUUFBUSxDQUFDMEcsSUFBVCxDQUFjakcsU0FBZCxDQUF3QjhCLE1BQXhCLENBQStCLGNBQS9CO0FBQ0FrRSxRQUFBQSxjQUFjLENBQUNoRyxTQUFmLENBQXlCOEIsTUFBekIsQ0FBZ0MsUUFBaEM7QUFDQWtFLFFBQUFBLGNBQWMsQ0FBQ2hHLFNBQWYsQ0FBeUJrQixHQUF6QixDQUE2QixLQUE3QjtBQUNIO0FBQ0osS0FORDtBQU9ILEdBN0JEOztBQStCQTRFLEVBQUFBLFNBQVM7O0FBRVQsTUFBTUssT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBQ0MsTUFBRCxFQUFTNUMsUUFBVCxFQUFtQjZDLE1BQW5CLEVBQThCO0FBQzFDM0QsSUFBQUEsTUFBTSxDQUFDL0MsZ0JBQVAsQ0FBd0IsTUFBeEIsRUFBZ0M7QUFBQSxhQUFNMkcsY0FBYyxDQUFDRixNQUFELEVBQVM1QyxRQUFULEVBQW1CNkMsTUFBbkIsQ0FBcEI7QUFBQSxLQUFoQztBQUNBM0QsSUFBQUEsTUFBTSxDQUFDL0MsZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0M7QUFBQSxhQUFNMkcsY0FBYyxDQUFDRixNQUFELEVBQVM1QyxRQUFULEVBQW1CNkMsTUFBbkIsQ0FBcEI7QUFBQSxLQUFsQztBQUVBOUcsSUFBQUEsUUFBUSxDQUFDeUIsYUFBVCxDQUF1QnFGLE1BQXZCLEVBQStCMUcsZ0JBQS9CLENBQWdELE9BQWhELEVBQXlELFlBQVk7QUFDakUsVUFBSSxLQUFLd0IsV0FBTCxJQUFvQixVQUF4QixFQUFvQztBQUNoQyxhQUFLQSxXQUFMLEdBQW1CLFVBQW5CO0FBQ0EsYUFBS25CLFNBQUwsQ0FBZWtCLEdBQWYsQ0FBbUIsUUFBbkI7QUFDSCxPQUhELE1BR087QUFDSCxhQUFLQyxXQUFMLEdBQW1CLFVBQW5CO0FBQ0EsYUFBS25CLFNBQUwsQ0FBZThCLE1BQWYsQ0FBc0IsUUFBdEI7QUFDSDs7QUFDRHZDLE1BQUFBLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEJnRSxRQUExQixFQUFvQy9ELE9BQXBDLENBQTRDLFVBQUN5QyxJQUFELEVBQU9xRSxLQUFQLEVBQWlCO0FBQ3pELFlBQUlyRSxJQUFJLENBQUNSLEtBQUwsQ0FBVzhFLE9BQVgsSUFBc0IsTUFBMUIsRUFBa0M7QUFDOUJ0RSxVQUFBQSxJQUFJLENBQUNSLEtBQUwsQ0FBVzhFLE9BQVgsR0FBcUIsSUFBckI7QUFDSCxTQUZELE1BRU87QUFDSCxjQUFJRCxLQUFLLEdBQUdILE1BQVosRUFBb0I7QUFDaEJsRSxZQUFBQSxJQUFJLENBQUNSLEtBQUwsQ0FBVzhFLE9BQVgsR0FBcUIsTUFBckI7QUFDSDtBQUNKO0FBQ0osT0FSRDtBQVNILEtBakJEOztBQW1CQSxhQUFTRixjQUFULENBQXdCRixNQUF4QixFQUFnQzVDLFFBQWhDLEVBQTBDNkMsTUFBMUMsRUFBa0Q7QUFDOUMsVUFBTUksS0FBSyxHQUFHbEgsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQmdFLFFBQTFCLENBQWQ7QUFDQSxVQUFNa0QsV0FBVyxHQUFHbkgsUUFBUSxDQUFDeUIsYUFBVCxDQUF1QnFGLE1BQXZCLENBQXBCOztBQUVBLFVBQUkzRCxNQUFNLENBQUNDLE1BQVAsQ0FBY0MsS0FBZCxJQUF1QixHQUF2QixJQUE4QjZELEtBQUssQ0FBQ25HLE1BQU4sR0FBZThGLE1BQWpELEVBQXlEO0FBQ3JESyxRQUFBQSxLQUFLLENBQUNoSCxPQUFOLENBQWMsVUFBQ3lDLElBQUQsRUFBT3FFLEtBQVAsRUFBaUI7QUFDM0IsY0FBSUEsS0FBSyxHQUFHSCxNQUFaLEVBQW9CO0FBQ2hCbEUsWUFBQUEsSUFBSSxDQUFDUixLQUFMLENBQVc4RSxPQUFYLEdBQXFCLE1BQXJCO0FBQ0FFLFlBQUFBLFdBQVcsQ0FBQ2hGLEtBQVosQ0FBa0I4RSxPQUFsQixHQUE0QixJQUE1QjtBQUNIO0FBQ0osU0FMRDtBQU1ILE9BUEQsTUFPTztBQUNIQyxRQUFBQSxLQUFLLENBQUNoSCxPQUFOLENBQWMsVUFBQ3lDLElBQUQsRUFBT3FFLEtBQVAsRUFBaUI7QUFDM0JyRSxVQUFBQSxJQUFJLENBQUNSLEtBQUwsQ0FBVzhFLE9BQVgsR0FBcUIsSUFBckI7QUFDQUUsVUFBQUEsV0FBVyxDQUFDaEYsS0FBWixDQUFrQjhFLE9BQWxCLEdBQTRCLE1BQTVCO0FBQ0gsU0FIRDtBQUlIO0FBQ0o7QUFDSixHQXpDRDs7QUEyQ0FMLEVBQUFBLE9BQU8sQ0FBQyxDQUFELEVBQUksNEJBQUosRUFBa0MsdUJBQWxDLENBQVA7QUFDQUEsRUFBQUEsT0FBTyxDQUFDLENBQUQsRUFBSSxvQkFBSixFQUEwQixtQkFBMUIsQ0FBUDs7QUFFQSxNQUFNUSxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLEdBQU07QUFDMUIsUUFBTUMsV0FBVyxHQUFHckgsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixnQkFBMUIsQ0FBcEI7QUFDQSxRQUFNcUgsV0FBVyxHQUFHdEgsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixnQkFBMUIsQ0FBcEIsQ0FGMEIsQ0FJMUI7O0FBQ0FrRCxJQUFBQSxNQUFNLENBQUMvQyxnQkFBUCxDQUF3QixRQUF4QixFQUFrQyxZQUFNO0FBQ3BDLFVBQUkrQyxNQUFNLENBQUNDLE1BQVAsQ0FBY0MsS0FBZCxJQUF1QixHQUEzQixFQUFnQztBQUM1QmlFLFFBQUFBLFdBQVcsQ0FBQ3BILE9BQVosQ0FBb0IsVUFBQXFILFVBQVUsRUFBSTtBQUM5QkEsVUFBQUEsVUFBVSxDQUFDcEYsS0FBWCxDQUFpQkMsU0FBakIsR0FBNkIsQ0FBN0I7QUFDSCxTQUZEO0FBR0gsT0FKRCxNQUlPO0FBQ0hrRixRQUFBQSxXQUFXLENBQUNwSCxPQUFaLENBQW9CLFVBQUFxSCxVQUFVLEVBQUk7QUFDOUJBLFVBQUFBLFVBQVUsQ0FBQ3BGLEtBQVgsQ0FBaUJDLFNBQWpCLEdBQTZCLElBQTdCO0FBQ0gsU0FGRDtBQUdIO0FBQ0osS0FWRDtBQVlBaUYsSUFBQUEsV0FBVyxDQUFDbkgsT0FBWixDQUFvQixVQUFBc0gsS0FBSyxFQUFJO0FBQ3pCQSxNQUFBQSxLQUFLLENBQUNwSCxnQkFBTixDQUF1QixPQUF2QixFQUFnQyxZQUFZO0FBQ3hDLFlBQU1rSCxXQUFXLEdBQUcsS0FBS2hHLGtCQUF6Qjs7QUFDQSxZQUFHbUcsZ0JBQWdCLENBQUNILFdBQUQsQ0FBaEIsQ0FBOEJsRixTQUE5QixJQUEyQyxLQUE5QyxFQUFxRDtBQUNqRCxlQUFLM0IsU0FBTCxDQUFla0IsR0FBZixDQUFtQixRQUFuQjtBQUNBMkYsVUFBQUEsV0FBVyxDQUFDbkYsS0FBWixDQUFrQkMsU0FBbEIsR0FBOEJrRixXQUFXLENBQUNqRixZQUFaLEdBQTJCLElBQXpEO0FBQ0FpRixVQUFBQSxXQUFXLENBQUNuRixLQUFaLENBQWtCNkQsT0FBbEIsR0FBNEIsQ0FBNUI7QUFDSCxTQUpELE1BSU87QUFDSCxlQUFLdkYsU0FBTCxDQUFlOEIsTUFBZixDQUFzQixRQUF0QjtBQUNBK0UsVUFBQUEsV0FBVyxDQUFDbkYsS0FBWixDQUFrQkMsU0FBbEIsR0FBOEIsSUFBOUI7QUFDQWtGLFVBQUFBLFdBQVcsQ0FBQ25GLEtBQVosQ0FBa0I2RCxPQUFsQixHQUE0QixJQUE1QjtBQUNIO0FBQ0osT0FYRDtBQVlILEtBYkQ7QUFjSCxHQS9CRDs7QUFpQ0FvQixFQUFBQSxlQUFlO0FBRWZNLEVBQUFBLENBQUMsQ0FBQyw0QkFBRCxDQUFELENBQWdDQyxLQUFoQyxDQUFzQztBQUNsQ0MsSUFBQUEsWUFBWSxFQUFFLENBRG9CO0FBRWxDQyxJQUFBQSxRQUFRLEVBQUUsSUFGd0I7QUFHbENDLElBQUFBLGVBQWUsRUFBRSxJQUhpQjtBQUlsQ0MsSUFBQUEsY0FBYyxFQUFFLENBSmtCO0FBS2xDQyxJQUFBQSxhQUFhLEVBQUUsSUFMbUI7QUFNbENDLElBQUFBLFNBQVMsRUFBRSxvQ0FOdUI7QUFPbENDLElBQUFBLFNBQVMsRUFBRSxvQ0FQdUI7QUFRbENDLElBQUFBLGFBQWEsRUFBRSxJQVJtQjtBQVNsQ0MsSUFBQUEsUUFBUSxFQUFFO0FBVHdCLEdBQXRDO0FBV0FWLEVBQUFBLENBQUMsQ0FBQyxzQkFBRCxDQUFELENBQTBCQyxLQUExQixDQUFnQztBQUM1QkMsSUFBQUEsWUFBWSxFQUFFLENBRGM7QUFFNUJHLElBQUFBLGNBQWMsRUFBRSxDQUZZO0FBRzVCTSxJQUFBQSxNQUFNLEVBQUUsS0FIb0I7QUFJNUJDLElBQUFBLElBQUksRUFBRSxJQUpzQjtBQUs1QkYsSUFBQUEsUUFBUSxFQUFFO0FBTGtCLEdBQWhDO0FBT0FWLEVBQUFBLENBQUMsQ0FBQyw0QkFBRCxDQUFELENBQWdDQyxLQUFoQyxDQUFzQztBQUNsQ0MsSUFBQUEsWUFBWSxFQUFFLENBRG9CO0FBRWxDRyxJQUFBQSxjQUFjLEVBQUUsQ0FGa0I7QUFHbENFLElBQUFBLFNBQVMsRUFBRSxvQ0FIdUI7QUFJbENDLElBQUFBLFNBQVMsRUFBRSxvQ0FKdUIsQ0FLbEM7O0FBTGtDLEdBQXRDO0FBT0FSLEVBQUFBLENBQUMsQ0FBQyw2QkFBRCxDQUFELENBQWlDQyxLQUFqQyxDQUF1QztBQUNuQ0MsSUFBQUEsWUFBWSxFQUFFLENBRHFCO0FBRW5DRyxJQUFBQSxjQUFjLEVBQUUsQ0FGbUI7QUFHbkNFLElBQUFBLFNBQVMsRUFBRSxrQkFId0I7QUFJbkNDLElBQUFBLFNBQVMsRUFBRSxrQkFKd0I7QUFLbkNLLElBQUFBLFVBQVUsRUFBRSxDQUNSO0FBQ0lDLE1BQUFBLFVBQVUsRUFBRSxHQURoQjtBQUVJQyxNQUFBQSxRQUFRLEVBQUU7QUFDTmIsUUFBQUEsWUFBWSxFQUFFO0FBRFI7QUFGZCxLQURRLEVBT1I7QUFDSVksTUFBQUEsVUFBVSxFQUFFLEdBRGhCO0FBRUlDLE1BQUFBLFFBQVEsRUFBRTtBQUNOYixRQUFBQSxZQUFZLEVBQUU7QUFEUjtBQUZkLEtBUFE7QUFMdUIsR0FBdkM7QUFvQkFGLEVBQUFBLENBQUMsQ0FBQyw0QkFBRCxDQUFELENBQWdDQyxLQUFoQyxDQUFzQztBQUNsQ0MsSUFBQUEsWUFBWSxFQUFFLENBRG9CO0FBRWxDRyxJQUFBQSxjQUFjLEVBQUUsQ0FGa0I7QUFHbENFLElBQUFBLFNBQVMsRUFBRSwwQkFIdUI7QUFJbENDLElBQUFBLFNBQVMsRUFBRSwwQkFKdUI7QUFLbENLLElBQUFBLFVBQVUsRUFBRSxDQUNSO0FBQ0lDLE1BQUFBLFVBQVUsRUFBRSxHQURoQjtBQUVJQyxNQUFBQSxRQUFRLEVBQUU7QUFDTmIsUUFBQUEsWUFBWSxFQUFFO0FBRFI7QUFGZCxLQURRLEVBT1I7QUFDSVksTUFBQUEsVUFBVSxFQUFFLEdBRGhCO0FBRUlDLE1BQUFBLFFBQVEsRUFBRTtBQUNOYixRQUFBQSxZQUFZLEVBQUU7QUFEUjtBQUZkLEtBUFEsRUFhUjtBQUNJWSxNQUFBQSxVQUFVLEVBQUUsR0FEaEI7QUFFSUMsTUFBQUEsUUFBUSxFQUFFO0FBQ05iLFFBQUFBLFlBQVksRUFBRTtBQURSO0FBRmQsS0FiUTtBQUxzQixHQUF0QztBQTBCQUYsRUFBQUEsQ0FBQyxDQUFDLE1BQUQsQ0FBRCxDQUFVZ0IsRUFBVixDQUFhLE9BQWIsRUFBc0Isb0JBQXRCLEVBQTRDLFlBQVk7QUFDcEQsUUFBSUMsSUFBSSxHQUFHakIsQ0FBQyxDQUFDLElBQUQsQ0FBWjtBQUNBLFFBQUlrQixJQUFJLEdBQUdsQixDQUFDLENBQUMsTUFBTWlCLElBQUksQ0FBQ0UsSUFBTCxDQUFVLE1BQVYsQ0FBUCxDQUFaO0FBQ0FuQixJQUFBQSxDQUFDLENBQUNvQixJQUFGLENBQU87QUFDSEMsTUFBQUEsR0FBRyxFQUFFSixJQUFJLENBQUNFLElBQUwsQ0FBVSxLQUFWLElBQW1CLEtBQW5CLEdBQTJCRixJQUFJLENBQUNLLEdBQUwsRUFEN0I7QUFFSDVFLE1BQUFBLElBQUksRUFBRSxLQUZIO0FBR0g2RSxNQUFBQSxRQUFRLEVBQUUsTUFIUDtBQUlIQyxNQUFBQSxPQUFPLEVBQUUsaUJBQVVDLFFBQVYsRUFBb0I7QUFDekJQLFFBQUFBLElBQUksQ0FBQ1EsS0FBTDs7QUFFQSxZQUFJRCxRQUFRLENBQUNFLEtBQVQsQ0FBZXRJLE1BQW5CLEVBQTJCO0FBQ3ZCMkcsVUFBQUEsQ0FBQyxDQUFDNEIsSUFBRixDQUFPSCxRQUFRLENBQUNFLEtBQWhCLEVBQXVCLFVBQVUzRCxDQUFWLEVBQWE2RCxJQUFiLEVBQW1CO0FBQ3RDWCxZQUFBQSxJQUFJLENBQUNZLE1BQUwseURBQTBERCxJQUFJLENBQUNSLEdBQS9ELGdCQUF1RVEsSUFBSSxDQUFDL0IsS0FBNUU7QUFDSCxXQUZEO0FBR0g7QUFDSjtBQVpFLEtBQVA7QUFjSCxHQWpCRDtBQWtCQUUsRUFBQUEsQ0FBQyxDQUFDLHFCQUFELENBQUQsQ0FBeUIrQixFQUF6QixDQUE0QixDQUE1QixFQUErQkMsUUFBL0IsQ0FBd0MsU0FBeEM7QUFDSCxDQTVjRCIsInNvdXJjZXNDb250ZW50IjpbIjtcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIGNyb3BUZXh0KCk7XHJcbiAgICBoaWRlQmxvY2soKTtcclxuXHJcbiAgICBsZXQgcmVhZE1vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtcmVhZC1tb3JlJyk7XHJcblxyXG4gICAgcmVhZE1vcmUuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBlbFRleHQgPSBlbC5pbm5lclRleHQ7XHJcbiAgICAgICAgICAgIGxldCBoaWRkZW5UZXh0ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcclxuXHJcbiAgICAgICAgICAgIGVsLmlubmVyVGV4dCA9IGVsVGV4dCA9PSAncmVhZCBtb3JlID4nID8gJ2hpZGUnIDogJ3JlYWQgbW9yZSA+JztcclxuICAgICAgICAgICAgaGlkZGVuVGV4dC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBjcm9wVGV4dCgpIHtcclxuICAgICAgICBsZXQgbWF4ID0gMjAwO1xyXG4gICAgICAgIGxldCB0ZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLXJlYWQtbW9yZS10ZXh0Jyk7XHJcbiAgICAgICAgdGV4dC5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgbGV0IHN0ciA9IGVsLmlubmVyVGV4dC50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChzdHIubGVuZ3RoID4gbWF4KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3ViU3RyID0gc3RyLnN1YnN0cmluZygwLCBtYXgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGhpZGRlblN0ciA9IHN0ci5zdWJzdHJpbmcobWF4LCBzdHIubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGVsLmlubmVyVGV4dCA9IHN1YlN0cjtcclxuICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCArPSBgPHNwYW4gY2xhc3M9XCJoaWRkZW4tdGV4dCBqcy1oaWRkZW4tdGV4dFwiPiR7aGlkZGVuU3RyfTwvc3Bhbj5gO1xyXG4gICAgICAgICAgICAgICAgZWwuaW5uZXJIVE1MICs9ICc8c3BhbiBjbGFzcz1cInJlYWQtbW9yZSBqcy1yZWFkLW1vcmVcIj5yZWFkIG1vcmUgPjwvc3Bhbj4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNob3dSZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtc2hvdy1yZXZpZXcnKTtcclxuXHJcbiAgICBzaG93UmV2aWV3LmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZWxUZXh0ID0gZWwuaW5uZXJUZXh0O1xyXG4gICAgICAgICAgICBsZXQgaGlkZGVuVGV4dCA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgIGxldCBpbWFnZXMgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblxyXG4gICAgICAgICAgICBlbC5pbm5lclRleHQgPSBlbFRleHQgPT0gJ3JlYWQgbW9yZSA+JyA/ICc8IGhpZGUnIDogJ3JlYWQgbW9yZSA+JztcclxuICAgICAgICAgICAgaGlkZGVuVGV4dC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XHJcbiAgICAgICAgICAgIGltYWdlcy5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGhpZGVCbG9jaygpIHtcclxuICAgICAgICBsZXQgbWF4ID0gMTI4O1xyXG4gICAgICAgIGxldCBwcm9kdWN0UmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWhpZGUtcmV2aWV3Jyk7XHJcbiAgICAgICAgcHJvZHVjdFJldmlldy5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgbGV0IHByb2R1Y3RUZXh0ID0gZWwucXVlcnlTZWxlY3RvcihcIi5wYWdlLXRleHRcIik7XHJcbiAgICAgICAgICAgIGxldCBzdHIgPSBwcm9kdWN0VGV4dC5pbm5lclRleHQudHJpbSgpO1xyXG4gICAgICAgICAgICBsZXQgaW1hZ2VzID0gZWwucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtcmV2aWV3X19pbWFnZXMnKTtcclxuICAgICAgICAgICAgaWYgKHN0ci5sZW5ndGggPiBtYXgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdWJTdHIgPSBzdHIuc3Vic3RyaW5nKDAsIG1heCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGlkZGVuU3RyID0gc3RyLnN1YnN0cmluZyhtYXgsIHN0ci5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgcHJvZHVjdFRleHQuaW5uZXJUZXh0ID0gc3ViU3RyO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBoaWRkZW5UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgaGlkZGVuVGV4dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4tdGV4dCcsICdwYWdlLXRleHQnLCAnanMtaGlkZGVuLXRleHQnKTtcclxuICAgICAgICAgICAgICAgIGhpZGRlblRleHQudGV4dENvbnRlbnQgPSBoaWRkZW5TdHI7XHJcblxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdFRleHQuYWZ0ZXIoaGlkZGVuVGV4dCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgcmVhZE1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIHJlYWRNb3JlLmNsYXNzTGlzdC5hZGQoJ3JlYWQtbW9yZScsICdqcy1zaG93LXJldmlldycpO1xyXG4gICAgICAgICAgICByZWFkTW9yZS50ZXh0Q29udGVudCA9ICdyZWFkIG1vcmUgPic7XHJcblxyXG4gICAgICAgICAgICBpbWFnZXMuYmVmb3JlKHJlYWRNb3JlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhY2NvcmRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hY2NvcmRpb25fX2l0ZW1cIik7XHJcblxyXG4gICAgY29uc3Qgb3BlbkFjY29yZGlvbiA9IGFjY29yZGlvbiA9PiB7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKFwiLmFjY29yZGlvbl9fYm9keVwiKTtcclxuICAgICAgICBhY2NvcmRpb24uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgICAgICBjb250ZW50LnN0eWxlLm1heEhlaWdodCA9IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBjbG9zZUFjY29yZGlvbiA9IGFjY29yZGlvbiA9PiB7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKFwiLmFjY29yZGlvbl9fYm9keVwiKTtcclxuICAgICAgICBhY2NvcmRpb24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBjb250ZW50LnN0eWxlLm1heEhlaWdodCA9IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIGFjY29yZGlvbnMuZm9yRWFjaChhY2NvcmRpb24gPT4ge1xyXG4gICAgICAgIGNvbnN0IGludHJvID0gYWNjb3JkaW9uLnF1ZXJ5U2VsZWN0b3IoXCIuYWNjb3JkaW9uX19oZWFkZXJcIik7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKFwiLmFjY29yZGlvbl9fYm9keVwiKTtcclxuXHJcbiAgICAgICAgaW50cm8ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZUFjY29yZGlvbihhY2NvcmRpb24pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gYWNjb3JkaW9ucy5mb3JFYWNoKChhY2NvcmRpb24pID0+IGNsb3NlQWNjb3JkaW9uKGFjY29yZGlvbikpO1xyXG4gICAgICAgICAgICAgICAgb3BlbkFjY29yZGlvbihhY2NvcmRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHNpZGViYXJMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2lkZWJhci1tZW51X19saW5rXCIpO1xyXG5cclxuICAgIHNpZGViYXJMaW5rcy5mb3JFYWNoKGVsZW0gPT4gZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbmF2YmFyTGlua0NsaWNrKSk7XHJcblxyXG4gICAgZnVuY3Rpb24gbmF2YmFyTGlua0NsaWNrKGV2ZW50KSB7XHJcbiAgICAgICAgc21vb3RoU2Nyb2xsKGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzbW9vdGhTY3JvbGwoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldElkID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xyXG4gICAgICAgIGlmICh3aW5kb3cuc2NyZWVuLndpZHRoID4gMTAyNCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oe1xyXG4gICAgICAgICAgICAgICAgdG9wOiB0YXJnZXRJZCA9PT0gXCIjXCIgPyAwIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRJZCkub2Zmc2V0VG9wIC0gMTAwLFxyXG4gICAgICAgICAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHtcclxuICAgICAgICAgICAgICAgIHRvcDogdGFyZ2V0SWQgPT09IFwiI1wiID8gMCA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0SWQpLm9mZnNldFRvcCAtIDIwMCxcclxuICAgICAgICAgICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3RzLXN0aWNreScpICE9PSBudWxsKSB7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcHRpbWl6ZWRSZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZUZpeGVkKCcucHJvZHVjdHMtc3RpY2t5Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB0b2dnbGVGaXhlZCgnLnByb2R1Y3RzLXN0aWNreScpO1xyXG5cclxuICAgICAgICB0aHJvdHRsZShcInJlc2l6ZVwiLCBcIm9wdGltaXplZFJlc2l6ZVwiKTtcclxuXHJcbiAgICB9XHJcbiAgICBsZXQgc3RpY2t5QmxvY2tDb29yZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RpY2t5LWJsb2NrJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cmFja1Njcm9sbCgnLnN0aWNreS1ibG9jaycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gdHJhY2tTY3JvbGwoZWxlbWVudHMpIHtcclxuICAgICAgICBsZXQgc3RpY2t5QmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50cyk7XHJcbiAgICAgICAgc3RpY2t5QmxvY2tzLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykgJiYgd2luZG93LnBhZ2VZT2Zmc2V0IDwgc3RpY2t5QmxvY2tDb29yZHMpIHtcclxuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzdGlja3lCbG9ja0Nvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdGhyb3R0bGUodHlwZSwgbmFtZSwgb2JqKSB7XHJcbiAgICAgICAgb2JqID0gb2JqIHx8IHdpbmRvdztcclxuICAgICAgICB2YXIgcnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBmdW5jID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocnVubmluZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KG5hbWUpKTtcclxuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5jKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlRml4ZWQoZWwpIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xyXG4gICAgICAgIGxldCBmaXhlZFdpZHRoID0gd2luZG93LnNjcmVlbi53aWR0aCA+IDEwMjQgPyBlbGVtZW50LnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGggLSAyODUgOiBlbGVtZW50LnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IGZpeGVkV2lkdGggKyAncHgnO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyBoYW1idXJnZXIgb3Blbi9jbG9zZSBhbmltYXRpb25cclxuICAgIGNvbnN0IHRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hhbWJ1cmdlclwiKTtcclxuICAgIGNvbnN0IG1vYmlsZU5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9iaWxlLW5hdlwiKTtcclxuICAgIGxldCBpc0Nsb3NlZCA9IHRydWU7XHJcblxyXG4gICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYnVyZ2VyVGltZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gYnVyZ2VyVGltZSgpIHtcclxuICAgICAgICBpZiAoaXNDbG9zZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0cmlnZ2VyLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1vcGVuXCIpO1xyXG4gICAgICAgICAgICB0cmlnZ2VyLmNsYXNzTGlzdC5hZGQoXCJpcy1jbG9zZWRcIik7XHJcbiAgICAgICAgICAgIG1vYmlsZU5hdi5jbGFzc0xpc3QuYWRkKCdpcy1vcGVuJyk7XHJcbiAgICAgICAgICAgIGlzQ2xvc2VkID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHJpZ2dlci5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtY2xvc2VkXCIpO1xyXG4gICAgICAgICAgICB0cmlnZ2VyLmNsYXNzTGlzdC5hZGQoXCJpcy1vcGVuXCIpO1xyXG4gICAgICAgICAgICBtb2JpbGVOYXYuY2xhc3NMaXN0LnJlbW92ZSgnaXMtb3BlbicpO1xyXG4gICAgICAgICAgICBpc0Nsb3NlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHNlYXJjaCBmb3JtIG9wZW4vY2xvc2UgYW5pbWF0aW9uXHJcbiAgICBjb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1mb3JtX19idG5cIik7XHJcbiAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJjbG9zZVwiKTtcclxuICAgICAgICB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnRvZ2dsZShcImluY2xpY2tlZFwiKTtcclxuICAgICAgICB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcudmFsdWUgPSBcIlwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcHJvZHVjdFJldmlld1N0YXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9kdWN0LXJldmlld19fc3RhcnNcIik7XHJcbiAgICBwcm9kdWN0UmV2aWV3U3RhcnMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBjb25zdCBkYXRhUmF0aW5nID0gZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1yYXRpbmdcIik7XHJcbiAgICAgICAgY29uc3Qgc3RhcnMgPSBlbC5jaGlsZHJlbjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFSYXRpbmc7IGkrKykge1xyXG4gICAgICAgICAgICBzdGFyc1tpXS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1vcGVuLWRyb3Bkb3duXCIpICYmIHdpbmRvdy5zY3JlZW4ud2lkdGggPD0gNTc2KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcmV0RHJvcGRvd24gPSBlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0gcGFyZW50Lm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICAgICAgaWYgKGRyb3Bkb3duLnN0eWxlLm1heEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLnN0eWxlLm9wYWNpdHkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgY2FyZXREcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc3R5bGUubWF4SGVpZ2h0ID0gZHJvcGRvd24uc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICBjYXJldERyb3Bkb3duLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgY29uc3QgYmFzaWNTY3JvbGxUb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgYnRuVG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWJ0bi1nby10b3AnKTtcclxuICAgICAgICBjb25zdCBidG5SZXZlYWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+PSAzMDApIHtcclxuICAgICAgICAgICAgICAgIGJ0blRvcC5jbGFzc0xpc3QuYWRkKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidG5Ub3AuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFRvcHNjcm9sbFRvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHdpbmRvdy5zY3JvbGxZIC0gMzApO1xyXG4gICAgICAgICAgICAgICAgICAgIFRvcHNjcm9sbFRvKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGJ0blJldmVhbCk7XHJcbiAgICAgICAgYnRuVG9wLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgVG9wc2Nyb2xsVG8pO1xyXG5cclxuICAgIH07XHJcbiAgICBiYXNpY1Njcm9sbFRvcCgpO1xyXG5cclxuICAgIGNvbnN0IG9wZW5Nb2RhbCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBtb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtbW9kYWxcIik7XHJcbiAgICAgICAgY29uc3QgbW9kYWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJhY2tncm91bmRcIik7XHJcblxyXG4gICAgICAgIG1vZGFsQnRuLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwibW9kYWwtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgbW9kYWxDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIm91dFwiKTtcclxuICAgICAgICAgICAgICAgIG1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJvcGVuZWRcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWwtY29udGFpbmVyXCIpIHx8XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbC1jbG9zZVwiKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIG1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuZWRcIik7XHJcbiAgICAgICAgICAgICAgICBtb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwib3V0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNykge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgbW9kYWxDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5lZFwiKTtcclxuICAgICAgICAgICAgICAgIG1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJvdXRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgb3Blbk1vZGFsKCk7XHJcblxyXG4gICAgY29uc3Qgc2VlTW9yZSA9IChudW1iZXIsIGVsZW1lbnRzLCBidXR0b24pID0+IHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4gc2hvd0hpZGVCbG9ja3MobnVtYmVyLCBlbGVtZW50cywgYnV0dG9uKSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKCkgPT4gc2hvd0hpZGVCbG9ja3MobnVtYmVyLCBlbGVtZW50cywgYnV0dG9uKSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0Q29udGVudCA9PSBcIlNlZSBtb3JlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGV4dENvbnRlbnQgPSBcIlNlZSBsZXNzXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRDb250ZW50ID0gXCJTZWUgbW9yZVwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudHMpLmZvckVhY2goKGVsZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5zdHlsZS5kaXNwbGF5ID09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5kaXNwbGF5ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gbnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzaG93SGlkZUJsb2NrcyhudW1iZXIsIGVsZW1lbnRzLCBidXR0b24pIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgY29uc3QgYnRuU2hvd0hpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8PSA4MDAgJiYgZWxlbXMubGVuZ3RoID4gbnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtcy5mb3JFYWNoKChlbGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IG51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blNob3dIaWRlLnN0eWxlLmRpc3BsYXkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbXMuZm9yRWFjaCgoZWxlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0blNob3dIaWRlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2VlTW9yZSgzLCAnLnByb2R1Y3QtY29tcGFyZS10b3BfX2l0ZW0nLCAnLmpzLXNlZS1tb3JlLXByb2R1Y3RzJyk7XHJcbiAgICBzZWVNb3JlKDEsICcuaGVscC1jZW50ZXJfX2l0ZW0nLCAnLmpzLXNlZS1tb3JlLWhlbHAnKTtcclxuXHJcbiAgICBjb25zdCBzaG93Rm9vdGVyTGlua3MgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZm9vdGVyVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9vdGVyX190aXRsZScpO1xyXG4gICAgICAgIGNvbnN0IGZvb3RlckxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvb3Rlcl9fbGlua3MnKTtcclxuXHJcbiAgICAgICAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiBzaG93SGlkZUxpbmtzKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8PSA1NzYpIHtcclxuICAgICAgICAgICAgICAgIGZvb3RlckxpbmtzLmZvckVhY2goZm9vdGVyTGluayA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9vdGVyTGluay5zdHlsZS5tYXhIZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb290ZXJMaW5rcy5mb3JFYWNoKGZvb3RlckxpbmsgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvb3Rlckxpbmsuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZvb3RlclRpdGxlLmZvckVhY2godGl0bGUgPT4ge1xyXG4gICAgICAgICAgICB0aXRsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvb3RlckxpbmtzID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICBpZihnZXRDb21wdXRlZFN0eWxlKGZvb3RlckxpbmtzKS5tYXhIZWlnaHQgPT0gJzBweCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvb3RlckxpbmtzLnN0eWxlLm1heEhlaWdodCA9IGZvb3RlckxpbmtzLnNjcm9sbEhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBmb290ZXJMaW5rcy5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBmb290ZXJMaW5rcy5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvb3RlckxpbmtzLnN0eWxlLm9wYWNpdHkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dGb290ZXJMaW5rcygpO1xyXG5cclxuICAgICQoXCIuanMtcHJvZHVjdC1zbGlkZXItcHJldmlld1wiKS5zbGljayh7XHJcbiAgICAgICAgc2xpZGVzVG9TaG93OiA0LFxyXG4gICAgICAgIHZlcnRpY2FsOiB0cnVlLFxyXG4gICAgICAgIHZlcnRpY2FsU3dpcGluZzogdHJ1ZSxcclxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcclxuICAgICAgICBmb2N1c09uU2VsZWN0OiB0cnVlLFxyXG4gICAgICAgIHByZXZBcnJvdzogXCIucHJvZHVjdC1zbGlkZXItcHJldmlld19fYnRuLS1wcmV2XCIsXHJcbiAgICAgICAgbmV4dEFycm93OiBcIi5wcm9kdWN0LXNsaWRlci1wcmV2aWV3X19idG4tLW5leHRcIixcclxuICAgICAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxyXG4gICAgICAgIGFzTmF2Rm9yOiBcIi5wcm9kdWN0LXNsaWRlci1tYWluXCJcclxuICAgIH0pO1xyXG4gICAgJChcIi5wcm9kdWN0LXNsaWRlci1tYWluXCIpLnNsaWNrKHtcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICBmYWRlOiB0cnVlLFxyXG4gICAgICAgIGFzTmF2Rm9yOiBcIi5qcy1wcm9kdWN0LXNsaWRlci1wcmV2aWV3XCJcclxuICAgIH0pO1xyXG4gICAgJChcIi5qcy1wcm9kdWN0LWNvbXBhcmUtc2xpZGVyXCIpLnNsaWNrKHtcclxuICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXHJcbiAgICAgICAgcHJldkFycm93OiBcIi5wcm9kdWN0LWNvbXBhcmUtc2xpZGVyX19idG4tLXByZXZcIixcclxuICAgICAgICBuZXh0QXJyb3c6IFwiLnByb2R1Y3QtY29tcGFyZS1zbGlkZXJfX2J0bi0tbmV4dFwiLFxyXG4gICAgICAgIC8vIHZhcmlhYmxlV2lkdGg6IHRydWUsXHJcbiAgICB9KTtcclxuICAgICQoXCIuanMtcmVsYXRlZC1wcm9kdWN0cy1zbGlkZXJcIikuc2xpY2soe1xyXG4gICAgICAgIHNsaWRlc1RvU2hvdzogMyxcclxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcclxuICAgICAgICBwcmV2QXJyb3c6IFwiLmpzLXJlbGF0ZWQtcHJldlwiLFxyXG4gICAgICAgIG5leHRBcnJvdzogXCIuanMtcmVsYXRlZC1uZXh0XCIsXHJcbiAgICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNTc2LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXVxyXG4gICAgfSk7XHJcbiAgICAkKFwiLmpzLXJlc2VudGx5LXZpZXdlZC1zbGlkZXJcIikuc2xpY2soe1xyXG4gICAgICAgIHNsaWRlc1RvU2hvdzogNCxcclxuICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcclxuICAgICAgICBwcmV2QXJyb3c6IFwiLmpzLXJlc2VudGx5LXZpZXdlZC1wcmV2XCIsXHJcbiAgICAgICAgbmV4dEFycm93OiBcIi5qcy1yZXNlbnRseS12aWV3ZWQtbmV4dFwiLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogOTkyLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBicmVha3BvaW50OiA1NzYsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdXHJcbiAgICB9KTtcclxuICAgICQoJ2JvZHknKS5vbigna2V5dXAnLCAnLmpzLXNlYXJjaC1tYXRjaGVzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBzZWxmID0gJCh0aGlzKTtcclxuICAgICAgICBsZXQgbGlzdCA9ICQoJy4nICsgc2VsZi5kYXRhKCdsaXN0JykpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogc2VsZi5kYXRhKCd1cmwnKSArICc/cT0nICsgc2VsZi52YWwoKSxcclxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdC5lbXB0eSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5pdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2gocmVzcG9uc2UuaXRlbXMsIGZ1bmN0aW9uIChpLCBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKGA8YSBjbGFzcz1cInNlYXJjaC1mb3JtLW1hdGNoZXNfX2xpbmtcIiBocmVmPVwiJHtpdGVtLnVybH1cIj4ke2l0ZW0udGl0bGV9PC9hPmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgICQoXCIucHJvZHVjdC10YWJsZV9fcm93XCIpLmVxKDIpLmFkZENsYXNzKFwiY3VycmVudFwiKTtcclxufSkoKTsiXSwiZmlsZSI6Im1haW4uanMifQ==
